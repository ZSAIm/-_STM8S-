STMicroelectronics assembler v4.52   (C)1987-2018   Thu Dec 20 01:10:39 2018
Page 1  Assembler
                                               e:\stm8s\electronic_scale\adc.asm

   1                         stm8/     
   2                                   
   0  000000                                 #include "ADC.inc"
   1                         
   2                                   
   3                                   
   0  000000                                 #include "Common.inc"
   1                                   
   2  000000 U                               #IFDEF   __COMMON_INC_
   5                                   
   6  000000                                 #define  __COMMON_INC_ 1
   7                                   
   8  000000                                 EXTERN   LCD_Delay.W 
   9  000000                                 EXTERN   ADC_Delay.W
  10  000000                                 EXTERN   KeyDelay.W
  11  000000                                 EXTERN   CPU_Delay_1us.W
  12  000000                                 EXTERN   MassDivider.W
  13                                                          ;EXTERN MassDivider_old.W
  14                                   
  15  000000                                 EXTERN   TriMul.W
  16  000000                                 EXTERN   QuadMul.W
  17  000000                                 EXTERN   TriDiv.W
  18                                   
  19  000000                                 #ENDIF   
  20                                   
  21                                   
<END_OF_INCLUSION>
   0  000000                                 #include "GlobalVar.inc"
   1                         
   2  000000 U                               #IFDEF   __GLOBAL_VAR__
   5                                   
   6  000000                                 #define  __GLOBAL_VAR__ 1
   7                         ;   ++ 0x0F
   8  000000                                 EXTERN   LCD_VAR0.B
   9  000000                                 EXTERN   LCD_VAR1.B
  10  000000                                 EXTERN   LCD_VAR2.B
  11                                   
  12  000000                                 EXTERN   ADC_COUNTER.B
  13                         
  14                                   
  15                         ;   ++ 0x04
  16  000000                                 EXTERN   ADC_SUM.B
  17  000000                                 EXTERN   ADC_SUM0.B
  18  000000                                 EXTERN   ADC_SUM1.B
  19  000000                                 EXTERN   ADC_SUM2.B
  20  000000                                 EXTERN   ADC_SUM3.B
  21                         ;   ++ 0x04
  22  000000                                 EXTERN   ADC_AVG.B
  23  000000                                 EXTERN   ADC_AVG0.B
  24  000000                                 EXTERN   ADC_AVG1.B
  25  000000                                 EXTERN   ADC_AVG2.B
  26  000000                                 EXTERN   ADC_AVG3.B
  27                         ;   ++ 0x18
  28  000000                                 EXTERN   ADC_STORE.B
  29                         
  30  000000                                 EXTERN   ADC_S00.B 
  31  000000                                 EXTERN   ADC_S01.B
  32  000000                                 EXTERN   ADC_S02.B
STMicroelectronics assembler v4.52   (C)1987-2018   Thu Dec 20 01:10:39 2018
Page 2  Assembler
                                               e:\stm8s\electronic_scale\adc.asm

  33                                   
  34  000000                                 EXTERN   ADC_S10.B
  35  000000                                 EXTERN   ADC_S11.B
  36  000000                                 EXTERN   ADC_S12.B
  37                         
  38  000000                                 EXTERN   ADC_S20.B
  39  000000                                 EXTERN   ADC_S21.B
  40  000000                                 EXTERN   ADC_S22.B
  41                                   
  42  000000                                 EXTERN   ADC_S30.B
  43  000000                                 EXTERN   ADC_S31.B
  44  000000                                 EXTERN   ADC_S32.B
  45                                   
  46  000000                                 EXTERN   ADC_S40.B
  47  000000                                 EXTERN   ADC_S41.B
  48  000000                                 EXTERN   ADC_S42.B
  49                                   
  50  000000                                 EXTERN   ADC_S50.B
  51  000000                                 EXTERN   ADC_S51.B
  52  000000                                 EXTERN   ADC_S52.B
  53                                   
  54  000000                                 EXTERN   ADC_S60.B
  55  000000                                 EXTERN   ADC_S61.B
  56  000000                                 EXTERN   ADC_S62.B
  57                                   
  58  000000                                 EXTERN   ADC_S70.B
  59  000000                                 EXTERN   ADC_S71.B
  60  000000                                 EXTERN   ADC_S72.B
  61                         ;   ++ 0x03
  62  000000                                 EXTERN   ADC_S80.B
  63  000000                                 EXTERN   ADC_S81.B
  64  000000                                 EXTERN   ADC_S82.B
  65                                   
  66  000000                                 EXTERN   ADC_S90.B
  67  000000                                 EXTERN   ADC_S91.B
  68  000000                                 EXTERN   ADC_S92.B
  69                                   
  70  000000                                 EXTERN   ADC_SA0.B
  71  000000                                 EXTERN   ADC_SA1.B
  72  000000                                 EXTERN   ADC_SA2.B
  73                                   
  74  000000                                 EXTERN   ADC_SB0.B
  75  000000                                 EXTERN   ADC_SB1.B
  76  000000                                 EXTERN   ADC_SB2.B
  77                                   
  78  000000                                 EXTERN   ADC_SC0.B
  79  000000                                 EXTERN   ADC_SC1.B
  80  000000                                 EXTERN   ADC_SC2.B
  81                                   
  82  000000                                 EXTERN   ADC_SD0.B
  83  000000                                 EXTERN   ADC_SD1.B
  84  000000                                 EXTERN   ADC_SD2.B
  85                                   
  86  000000                                 EXTERN   ADC_SE0.B
  87  000000                                 EXTERN   ADC_SE1.B
  88  000000                                 EXTERN   ADC_SE2.B
  89                                   
STMicroelectronics assembler v4.52   (C)1987-2018   Thu Dec 20 01:10:39 2018
Page 3  Assembler
                                               e:\stm8s\electronic_scale\adc.asm

  90  000000                                 EXTERN   ADC_SF0.B
  91  000000                                 EXTERN   ADC_SF1.B
  92  000000                                 EXTERN   ADC_SF2.B
  93                                   
  94  000000                                 EXTERN   ADC_SG0.B
  95  000000                                 EXTERN   ADC_SG1.B
  96  000000                                 EXTERN   ADC_SG2.B
  97                                   
  98  000000                                 EXTERN   ADC_SH0.B
  99  000000                                 EXTERN   ADC_SH1.B
 100  000000                                 EXTERN   ADC_SH2.B
 101                                   
 102  000000                                 EXTERN   ADC_SI0.B
 103  000000                                 EXTERN   ADC_SI1.B
 104  000000                                 EXTERN   ADC_SI2.B
 105                                   
 106  000000                                 EXTERN   ADC_SJ0.B
 107  000000                                 EXTERN   ADC_SJ1.B
 108  000000                                 EXTERN   ADC_SJ2.B
 109                                   
 110  000000                                 EXTERN   ADC_SK0.B
 111  000000                                 EXTERN   ADC_SK1.B
 112  000000                                 EXTERN   ADC_SK2.B
 113                                   
 114  000000                                 EXTERN   ADC_SL0.B
 115  000000                                 EXTERN   ADC_SL1.B
 116  000000                                 EXTERN   ADC_SL2.B
 117                                   
 118  000000                                 EXTERN   ADC_SM0.B
 119  000000                                 EXTERN   ADC_SM1.B
 120  000000                                 EXTERN   ADC_SM2.B
 121                                   
 122  000000                                 EXTERN   ADC_SN0.B
 123  000000                                 EXTERN   ADC_SN1.B
 124  000000                                 EXTERN   ADC_SN2.B
 125                                   
 126  000000                                 EXTERN   ADC_SO0.B
 127  000000                                 EXTERN   ADC_SO1.B
 128  000000                                 EXTERN   ADC_SO2.B
 129                                   
 130  000000                                 EXTERN   ADC_SP0.B
 131  000000                                 EXTERN   ADC_SP1.B
 132  000000                                 EXTERN   ADC_SP2.B
 133                                   
 134  000000                                 EXTERN   ADC_SQ0.B
 135  000000                                 EXTERN   ADC_SQ1.B
 136  000000                                 EXTERN   ADC_SQ2.B
 137                                   
 138  000000                                 EXTERN   ADC_SR0.B
 139  000000                                 EXTERN   ADC_SR1.B
 140  000000                                 EXTERN   ADC_SR2.B
 141                                   
 142  000000                                 EXTERN   ADC_SS0.B
 143  000000                                 EXTERN   ADC_SS1.B
 144  000000                                 EXTERN   ADC_SS2.B
 145                                   
 146  000000                                 EXTERN   ADC_ST0.B
STMicroelectronics assembler v4.52   (C)1987-2018   Thu Dec 20 01:10:39 2018
Page 4  Assembler
                                               e:\stm8s\electronic_scale\adc.asm

 147  000000                                 EXTERN   ADC_ST1.B
 148  000000                                 EXTERN   ADC_ST2.B
 149                                   
 150  000000                                 EXTERN   ADC_SU0.B
 151  000000                                 EXTERN   ADC_SU1.B
 152  000000                                 EXTERN   ADC_SU2.B
 153                                   
 154  000000                                 EXTERN   ADC_SV0.B
 155  000000                                 EXTERN   ADC_SV1.B
 156  000000                                 EXTERN   ADC_SV2.B
 157                                   
 158  000000                                 EXTERN   ADC_SW0.B
 159  000000                                 EXTERN   ADC_SW1.B
 160  000000                                 EXTERN   ADC_SW2.B
 161                                   
 162  000000                                 EXTERN   ADC_SX0.B
 163  000000                                 EXTERN   ADC_SX1.B
 164  000000                                 EXTERN   ADC_SX2.B
 165                                   
 166  000000                                 EXTERN   ADC_SY0.B
 167  000000                                 EXTERN   ADC_SY1.B
 168  000000                                 EXTERN   ADC_SY2.B
 169                                   
 170  000000                                 EXTERN   ADC_THRESHOLD_QUOTIENT.B
 171  000000                                 EXTERN   ADC_THRESHOLD_QUOTIENT1.B
 172  000000                                 EXTERN   ADC_THRESHOLD_QUOTIENT0.B
 173                         
 174  000000                                 EXTERN   ADC_MAX_QUOTIENT.B
 175  000000                                 EXTERN   ADC_MAX_QUOTIENT_S1.B
 176  000000                                 EXTERN   ADC_MAX_QUOTIENT_S0.B
 177                         
 178  000000                                 EXTERN   ADC_MAX_REMAINDER.B
 179  000000                                 EXTERN   ADC_MAX_REMAINDER_S1.B
 180  000000                                 EXTERN   ADC_MAX_REMAINDER_S0.B
 181                                   
 182                                   
 183                                                          ;EXTERN ADC_SLOPE.B
 184                         ;   ++ 0x01
 185  000000                                 EXTERN   ADC_NEXT_PTR.B
 186                                                          ;EXTERN ADC_MAX_PTR.B
 187                                                          ;EXTERN ADC_MIN_PTR.B
 188                                   
 189                                   
 190  000000                                 EXTERN   ADC_SLOPE.B
 191                         ;   ++ 0x04
 192  000000                                 EXTERN   ZERO_ADC.B
 193  000000                                 EXTERN   ZERO_ADC0.B
 194  000000                                 EXTERN   ZERO_ADC1.B
 195  000000                                 EXTERN   ZERO_ADC2.B
 196  000000                                 EXTERN   ZERO_ADC3.B
 197                                   
 198  000000                                 EXTERN   NET_ADC.B
 199  000000                                 EXTERN   NET_ADC0.B
 200  000000                                 EXTERN   NET_ADC1.B
 201  000000                                 EXTERN   NET_ADC2.B
 202  000000                                 EXTERN   NET_ADC3.B
 203                                   
STMicroelectronics assembler v4.52   (C)1987-2018   Thu Dec 20 01:10:39 2018
Page 5  Assembler
                                               e:\stm8s\electronic_scale\adc.asm

 204  000000                                 EXTERN   NET_BUF.B
 205  000000                                 EXTERN   NET_BUF3.B
 206  000000                                 EXTERN   NET_BUF2.B
 207  000000                                 EXTERN   NET_BUF1.B
 208  000000                                 EXTERN   NET_BUF0.B
 209                                   
 210                                   
 211  000000                                 EXTERN   WEIGHT_QUOTIENT.B
 212  000000                                 EXTERN   WEIGHT_REMAINDER.B
 213                                   
 214                                   
 215  000000                                 EXTERN   PRICE_MUL3.B
 216  000000                                 EXTERN   PRICE_MUL2.B
 217  000000                                 EXTERN   PRICE_MUL1.B
 218  000000                                 EXTERN   PRICE_MUL0.B
 219                                   
 220  000000                                 EXTERN   KEYDOWN_FLAG.B
 221                                   
 222                                   
 223  000000                                 EXTERN   KEYBOARD_STORE.B
 224                                   
 225  000000                                 EXTERN   KEYBOARD_S4.B
 226  000000                                 EXTERN   KEYBOARD_S3.B
 227  000000                                 EXTERN   KEYBOARD_S2.B
 228  000000                                 EXTERN   KEYBOARD_S1.B
 229  000000                                 EXTERN   KEYBOARD_S0.B
 230  000000                                 EXTERN   KEYBOARD_PTR.B
 231                                   
 232  000000                                 EXTERN   KEYBOARD_DOT_OK.B
 233                                   
 234  000000                                 EXTERN   KEYBOARD_PRICE_BUF_S4.B
 235  000000                                 EXTERN   KEYBOARD_PRICE_BUF_S3.B
 236  000000                                 EXTERN   KEYBOARD_PRICE_BUF_S2.B
 237  000000                                 EXTERN   KEYBOARD_PRICE_BUF_S1.B
 238  000000                                 EXTERN   KEYBOARD_PRICE_BUF_S0.B
 239                                   
 240                                   
 241  000000                                 EXTERN   KEYBOARD_THRESHOLD_BUF_S4.B
 242  000000                                 EXTERN   KEYBOARD_THRESHOLD_BUF_S3.B
 243  000000                                 EXTERN   KEYBOARD_THRESHOLD_BUF_S2.B
 244  000000                                 EXTERN   KEYBOARD_THRESHOLD_BUF_S1.B
 245  000000                                 EXTERN   KEYBOARD_THRESHOLD_BUF_S0.B
 246                                   
 247                                   
 248  000000                                 EXTERN   KEY_ARRAY_MENU.B
 249  000000                                 EXTERN   KEY_TYPING_FLAG.B
 250                                   
 251                                   
 252  000000                                 EXTERN   STR_MASS.B
 253  000000                                 EXTERN   CHAR_MASS9.B
 254  000000                                 EXTERN   CHAR_MASS8.B
 255  000000                                 EXTERN   CHAR_MASS7.B
 256  000000                                 EXTERN   CHAR_MASS6.B
 257  000000                                 EXTERN   CHAR_MASS5.B
 258  000000                                 EXTERN   CHAR_MASS4.B
 259  000000                                 EXTERN   CHAR_MASS3.B
 260  000000                                 EXTERN   CHAR_MASS2.B
STMicroelectronics assembler v4.52   (C)1987-2018   Thu Dec 20 01:10:39 2018
Page 6  Assembler
                                               e:\stm8s\electronic_scale\adc.asm

 261  000000                                 EXTERN   CHAR_MASS1.B
 262  000000                                 EXTERN   CHAR_MASS0.B
 263  000000                                 EXTERN   CHAR_MASS_1.B
 264                         
 265                                   
 266                                   
 267  000000                                 EXTERN   STR_PRICE.B
 268  000000                                 EXTERN   CHAR_PRICE5.B
 269  000000                                 EXTERN   CHAR_PRICE4.B
 270  000000                                 EXTERN   CHAR_PRICE3.B
 271  000000                                 EXTERN   CHAR_PRICE2.B
 272  000000                                 EXTERN   CHAR_PRICE1.B
 273  000000                                 EXTERN   CHAR_PRICE0.B
 274                                   
 275  000000                                 EXTERN   STR_THRESHOLD.B
 276  000000                                 EXTERN   CHAR_THRESHOLD7.B
 277  000000                                 EXTERN   CHAR_THRESHOLD6.B
 278  000000                                 EXTERN   CHAR_THRESHOLD5.B
 279  000000                                 EXTERN   CHAR_THRESHOLD4.B
 280  000000                                 EXTERN   CHAR_THRESHOLD3.B
 281  000000                                 EXTERN   CHAR_THRESHOLD2.B
 282  000000                                 EXTERN   CHAR_THRESHOLD1.B
 283  000000                                 EXTERN   CHAR_THRESHOLD0.B
 284                                   
 285                                   
 286                                   
 287  000000                                 EXTERN   STR_MONEY.B
 288  000000                                 EXTERN   CHAR_MONEY7.B
 289  000000                                 EXTERN   CHAR_MONEY6.B
 290  000000                                 EXTERN   CHAR_MONEY5.B
 291  000000                                 EXTERN   CHAR_MONEY4.B
 292  000000                                 EXTERN   CHAR_MONEY3.B
 293  000000                                 EXTERN   CHAR_MONEY2.B
 294  000000                                 EXTERN   CHAR_MONEY1.B
 295  000000                                 EXTERN   CHAR_MONEY0.B
 296                                   
 297                                   
 298  000000                                 EXTERN   STR_MAX_MASS.B
 299                                                          ;EXTERN CHAR_MAX_MASS11.B
 300                                                          ;EXTERN CHAR_MAX_MASS10.B
 301  000000                                 EXTERN   CHAR_MAX_MASS9.B
 302  000000                                 EXTERN   CHAR_MAX_MASS8.B
 303  000000                                 EXTERN   CHAR_MAX_MASS7.B
 304  000000                                 EXTERN   CHAR_MAX_MASS6.B
 305  000000                                 EXTERN   CHAR_MAX_MASS5.B
 306  000000                                 EXTERN   CHAR_MAX_MASS4.B
 307  000000                                 EXTERN   CHAR_MAX_MASS3.B
 308  000000                                 EXTERN   CHAR_MAX_MASS2.B
 309  000000                                 EXTERN   CHAR_MAX_MASS1.B
 310  000000                                 EXTERN   CHAR_MAX_MASS0.B
 311  000000                                 EXTERN   CHAR_MAX_MASS_1.B
 312                                   
 313  000000                                 #ENDIF   
 314                                   
 315                                   
<END_OF_INCLUSION>
   0  000000                                 #include "MacroFunction.inc"
   1                         
STMicroelectronics assembler v4.52   (C)1987-2018   Thu Dec 20 01:10:39 2018
Page 7  Assembler
                                               e:\stm8s\electronic_scale\adc.asm

   2                                   
   3                                   
   4  000000 U                               #IFDEF   __MACRO_FUNCTION_
   7  000000                                 #define  __MACRO_FUNCTION_ 1
   8                                   
   0  000000                                 #include "LCD.inc"
   1                                   
   2  000000 U                               #IFDEF   __LCD_ 1
   5  000000                                 #define  __LCD_ 1
   6                                   
   0  000000                                 #include "stm8s105k4.inc"
   1                         ; STM8S105K4.inc
   2  000000 U                               #IFDEF   __INCLUDE_STM8S105K4_
   4  000000                                 #define  __INCLUDE_STM8S105K4_ 1
   0  000000                                 #include "STM8S105K.inc"
   1                         ; STM8S105K.inc
   2                         
   3                         ; Copyright (c) 2003-2012 STMicroelectronics
   4                         
   5  000000 U                               #ifdef   __STM8S105K__
   8  000000                                 #define  __STM8S105K__ 1
   9                         
  10                         ; STM8S105K
  11                         
  12                         
  13                         ; Port A
  14                         ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
                               ;;;;;;
  15                         
  16  000000                                 EXTERN   PA_ODR.w      ; Port A data output latch 
                                                                ;register
  17                         
  18  000000                                 EXTERN   PA_IDR.w      ; Port A input pin value 
                                                                ;register
  19                         
  20  000000                                 EXTERN   PA_DDR.w      ; Port A data direction 
                                                                ;register
  21                         
  22  000000                                 EXTERN   PA_CR1.w      ; Port A control register 1
  23                         
  24  000000                                 EXTERN   PA_CR2.w      ; Port A control register 2
  25                         
  26                         ; Port B
  27                         ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
                               ;;;;;;
  28                         
  29  000000                                 EXTERN   PB_ODR.w      ; Port B data output latch 
                                                                ;register
  30                         
  31  000000                                 EXTERN   PB_IDR.w      ; Port B input pin value 
                                                                ;register
  32                         
  33  000000                                 EXTERN   PB_DDR.w      ; Port B data direction 
                                                                ;register
  34                         
  35  000000                                 EXTERN   PB_CR1.w      ; Port B control register 1
  36                         
STMicroelectronics assembler v4.52   (C)1987-2018   Thu Dec 20 01:10:39 2018
Page 8  Assembler
                                               e:\stm8s\electronic_scale\adc.asm

  37  000000                                 EXTERN   PB_CR2.w      ; Port B control register 2
  38                         
  39                         ; Port C
  40                         ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
                               ;;;;;;
  41                         
  42  000000                                 EXTERN   PC_ODR.w      ; Port C data output latch 
                                                                ;register
  43                         
  44  000000                                 EXTERN   PC_IDR.w      ; Port C input pin value 
                                                                ;register
  45                         
  46  000000                                 EXTERN   PC_DDR.w      ; Port C data direction 
                                                                ;register
  47                         
  48  000000                                 EXTERN   PC_CR1.w      ; Port C control register 1
  49                         
  50  000000                                 EXTERN   PC_CR2.w      ; Port C control register 2
  51                         
  52                         ; Port D
  53                         ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
                               ;;;;;;
  54                         
  55  000000                                 EXTERN   PD_ODR.w      ; Port D data output latch 
                                                                ;register
  56                         
  57  000000                                 EXTERN   PD_IDR.w      ; Port D input pin value 
                                                                ;register
  58                         
  59  000000                                 EXTERN   PD_DDR.w      ; Port D data direction 
                                                                ;register
  60                         
  61  000000                                 EXTERN   PD_CR1.w      ; Port D control register 1
  62                         
  63  000000                                 EXTERN   PD_CR2.w      ; Port D control register 2
  64                         
  65                         ; Port E
  66                         ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
                               ;;;;;;
  67                         
  68  000000                                 EXTERN   PE_ODR.w      ; Port E data output latch 
                                                                ;register
  69                         
  70  000000                                 EXTERN   PE_IDR.w      ; Port E input pin value 
                                                                ;register
  71                         
  72  000000                                 EXTERN   PE_DDR.w      ; Port E data direction 
                                                                ;register
  73                         
  74  000000                                 EXTERN   PE_CR1.w      ; Port E control register 1
  75                         
  76  000000                                 EXTERN   PE_CR2.w      ; Port E control register 2
  77                         
  78                         ; Port F
  79                         ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
                               ;;;;;;
  80                         
STMicroelectronics assembler v4.52   (C)1987-2018   Thu Dec 20 01:10:39 2018
Page 9  Assembler
                                               e:\stm8s\electronic_scale\adc.asm

  81  000000                                 EXTERN   PF_ODR.w      ; Port F data output latch 
                                                                ;register
  82                         
  83  000000                                 EXTERN   PF_IDR.w      ; Port F input pin value 
                                                                ;register
  84                         
  85  000000                                 EXTERN   PF_DDR.w      ; Port F data direction 
                                                                ;register
  86                         
  87  000000                                 EXTERN   PF_CR1.w      ; Port F control register 1
  88                         
  89  000000                                 EXTERN   PF_CR2.w      ; Port F control register 2
  90                         
  91                         ; Flash
  92                         ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
                               ;;;;;;
  93                         
  94  000000                                 EXTERN   FLASH_CR1.w   ; Flash control register 1
  95                         
  96  000000                                 EXTERN   FLASH_CR2.w   ; Flash control register 2
  97                         
  98  000000                                 EXTERN   FLASH_NCR2.w  ; Flash complementary control 
                                                                ;register 2
  99                         
 100  000000                                 EXTERN   FLASH_FPR.w   ; Flash protection register
 101                         
 102  000000                                 EXTERN   FLASH_NFPR.w  ; Flash complementary protection
                                                                ; register
 103                         
 104  000000                                 EXTERN   FLASH_IAPSR.w  ; Flash in-application 
                                                                ;programming status register
 105                         
 106  000000                                 EXTERN   FLASH_PUKR.w  ; Flash Program memory 
                                                                ;unprotection register
 107                         
 108  000000                                 EXTERN   FLASH_DUKR.w  ; Data EEPROM unprotection 
                                                                ;register
 109                         
 110                         ; External Interrupt Control Register (ITC)
 111                         ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
                               ;;;;;;
 112                         
 113  000000                                 EXTERN   EXTI_CR1.w    ; External interrupt control 
                                                                ;register 1
 114                         
 115  000000                                 EXTERN   EXTI_CR2.w    ; External interrupt control 
                                                                ;register 2
 116                         
 117                         ; Reset (RST)
 118                         ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
                               ;;;;;;
 119                         
 120  000000                                 EXTERN   RST_SR.w      ; Reset status register 1
 121                         
 122                         ; Clock Control (CLK)
 123                         ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
                               ;;;;;;
STMicroelectronics assembler v4.52   (C)1987-2018   Thu Dec 20 01:10:39 2018
Page 10  Assembler
                                               e:\stm8s\electronic_scale\adc.asm

 124                         
 125  000000                                 EXTERN   CLK_ICKR.w    ; Internal clock control 
                                                                ;register
 126                         
 127  000000                                 EXTERN   CLK_ECKR.w    ; External clock control 
                                                                ;register
 128                         
 129  000000                                 EXTERN   CLK_CMSR.w    ; Clock master status register
 130                         
 131  000000                                 EXTERN   CLK_SWR.w     ; Clock master switch register
 132                         
 133  000000                                 EXTERN   CLK_SWCR.w    ; Clock switch control register
 134                         
 135  000000                                 EXTERN   CLK_CKDIVR.w  ; Clock divider register
 136                         
 137  000000                                 EXTERN   CLK_PCKENR1.w  ; Peripheral clock gating 
                                                                ;register 1
 138                         
 139  000000                                 EXTERN   CLK_CSSR.w    ; Clock security system 
                                                                ;register
 140                         
 141  000000                                 EXTERN   CLK_CCOR.w    ; Configurable clock control 
                                                                ;register
 142                         
 143  000000                                 EXTERN   CLK_PCKENR2.w  ; Peripheral clock gating 
                                                                ;register 2
 144                         
 145  000000                                 EXTERN   CLK_CANCCR.w  ; CAN clock control register
 146                         
 147  000000                                 EXTERN   CLK_HSITRIMR.w  ; HSI clock calibration trimming
                                                                ; register
 148                         
 149  000000                                 EXTERN   CLK_SWIMCCR.w  ; SWIM clock control register
 150                         
 151                         ; Window Watchdog (WWDG)
 152                         ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
                               ;;;;;;
 153                         
 154  000000                                 EXTERN   WWDG_CR.w     ; WWDG Control Register
 155                         
 156  000000                                 EXTERN   WWDG_WR.w     ; WWDR Window Register
 157                         
 158                         ; Independent Watchdog (IWDG)
 159                         ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
                               ;;;;;;
 160                         
 161  000000                                 EXTERN   IWDG_KR.w     ; IWDG Key Register
 162                         
 163  000000                                 EXTERN   IWDG_PR.w     ; IWDG Prescaler Register
 164                         
 165  000000                                 EXTERN   IWDG_RLR.w    ; IWDG Reload Register
 166                         
 167                         ; Auto Wake-Up (AWU)
 168                         ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
                               ;;;;;;
 169                         
 170  000000                                 EXTERN   AWU_CSR.w     ; AWU Control/Status Register
STMicroelectronics assembler v4.52   (C)1987-2018   Thu Dec 20 01:10:39 2018
Page 11  Assembler
                                               e:\stm8s\electronic_scale\adc.asm

 171                         
 172  000000                                 EXTERN   AWU_APR.w     ; AWU asynchronous prescaler 
                                                                ;buffer register
 173                         
 174  000000                                 EXTERN   AWU_TBR.w     ; AWU Timebase selection 
                                                                ;register
 175                         
 176                         ; Beeper (BEEP)
 177                         ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
                               ;;;;;;
 178                         
 179  000000                                 EXTERN   BEEP_CSR.w    ; BEEP Control/Status Register
 180                         
 181                         ; Serial Peripheral Interface (SPI)
 182                         ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
                               ;;;;;;
 183                         
 184  000000                                 EXTERN   SPI_CR1.w     ; SPI Control Register 1
 185                         
 186  000000                                 EXTERN   SPI_CR2.w     ; SPI Control Register 2
 187                         
 188  000000                                 EXTERN   SPI_ICR.w     ; SPI Interrupt Control 
                                                                ;Register
 189                         
 190  000000                                 EXTERN   SPI_SR.w      ; SPI Status Register
 191                         
 192  000000                                 EXTERN   SPI_DR.w      ; SPI Data Register
 193                         
 194  000000                                 EXTERN   SPI_CRCPR.w   ; SPI CRC Polynomial Register
 195                         
 196  000000                                 EXTERN   SPI_RXCRCR.w  ; SPI Rx CRC Register
 197                         
 198  000000                                 EXTERN   SPI_TXCRCR.w  ; SPI Tx CRC Register
 199                         
 200                         ; I2C Bus Interface (I2C)
 201                         ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
                               ;;;;;;
 202                         
 203  000000                                 EXTERN   I2C_CR1.w     ; I2C control register 1
 204                         
 205  000000                                 EXTERN   I2C_CR2.w     ; I2C control register 2
 206                         
 207  000000                                 EXTERN   I2C_FREQR.w   ; I2C frequency register
 208                         
 209  000000                                 EXTERN   I2C_OARL.w    ; I2C Own address register low
 210                         
 211  000000                                 EXTERN   I2C_OARH.w    ; I2C Own address register high
 212                         
 213  000000                                 EXTERN   I2C_DR.w      ; I2C data register
 214                         
 215  000000                                 EXTERN   I2C_SR1.w     ; I2C status register 1
 216                         
 217  000000                                 EXTERN   I2C_SR2.w     ; I2C status register 2
 218                         
 219  000000                                 EXTERN   I2C_SR3.w     ; I2C status register 3
 220                         
 221  000000                                 EXTERN   I2C_ITR.w     ; I2C interrupt control 
STMicroelectronics assembler v4.52   (C)1987-2018   Thu Dec 20 01:10:39 2018
Page 12  Assembler
                                               e:\stm8s\electronic_scale\adc.asm

                                                                ;register
 222                         
 223  000000                                 EXTERN   I2C_CCRL.w    ; I2C Clock control register 
                                                                ;low
 224                         
 225  000000                                 EXTERN   I2C_CCRH.w    ; I2C Clock control register 
                                                                ;high
 226                         
 227  000000                                 EXTERN   I2C_TRISER.w  ; I2C TRISE register
 228                         
 229  000000                                 EXTERN   I2C_PECR.w    ; I2C packet error checking 
                                                                ;register
 230                         
 231                         ; LIN Universal asynch. receiver transmitter (UART2)
 232                         ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
                               ;;;;;;
 233                         
 234  000000                                 EXTERN   UART2_SR.w    ; UART2 Status Register
 235                         
 236  000000                                 EXTERN   UART2_DR.w    ; UART2 Data Register
 237                         
 238  000000                                 EXTERN   UART2_BRR1.w  ; UART2 Baud Rate Register 1
 239                         
 240  000000                                 EXTERN   UART2_BRR2.w  ; UART2 Baud Rate Register 2
 241                         
 242  000000                                 EXTERN   UART2_CR1.w   ; UART2 Control Register 1
 243                         
 244  000000                                 EXTERN   UART2_CR2.w   ; UART2 Control Register 2
 245                         
 246  000000                                 EXTERN   UART2_CR3.w   ; UART2 Control Register 3
 247                         
 248  000000                                 EXTERN   UART2_CR4.w   ; UART2 Control Register 4
 249                         
 250  000000                                 EXTERN   UART2_CR5.w   ; UART2 Control Register 5
 251                         
 252  000000                                 EXTERN   UART2_CR6.w   ; UART2 Control Register 6
 253                         
 254  000000                                 EXTERN   UART2_GTR.w   ; UART2 Guard time Register
 255                         
 256  000000                                 EXTERN   UART2_PSCR.w  ; UART2 Prescaler Register
 257                         
 258                         ; 16-Bit Timer 1 (TIM1)
 259                         ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
                               ;;;;;;
 260                         
 261  000000                                 EXTERN   TIM1_CR1.w    ; TIM1 Control register 1
 262                         
 263  000000                                 EXTERN   TIM1_CR2.w    ; TIM1 Control register 2
 264                         
 265  000000                                 EXTERN   TIM1_SMCR.w   ; TIM1 Slave Mode Control 
                                                                ;register
 266                         
 267  000000                                 EXTERN   TIM1_ETR.w    ; TIM1 external trigger 
                                                                ;register
 268                         
 269  000000                                 EXTERN   TIM1_IER.w    ; TIM1 Interrupt enable 
                                                                ;register
STMicroelectronics assembler v4.52   (C)1987-2018   Thu Dec 20 01:10:39 2018
Page 13  Assembler
                                               e:\stm8s\electronic_scale\adc.asm

 270                         
 271  000000                                 EXTERN   TIM1_SR1.w    ; TIM1 Status register 1
 272                         
 273  000000                                 EXTERN   TIM1_SR2.w    ; TIM1 Status register 2
 274                         
 275  000000                                 EXTERN   TIM1_EGR.w    ; TIM1 Event Generation 
                                                                ;register
 276                         
 277  000000                                 EXTERN   TIM1_CCMR1.w  ; TIM1 Capture/Compare mode 
                                                                ;register 1
 278                         
 279  000000                                 EXTERN   TIM1_CCMR2.w  ; TIM1 Capture/Compare mode 
                                                                ;register 2
 280                         
 281  000000                                 EXTERN   TIM1_CCMR3.w  ; TIM1 Capture/Compare mode 
                                                                ;register 3
 282                         
 283  000000                                 EXTERN   TIM1_CCMR4.w  ; TIM1 Capture/Compare mode 
                                                                ;register 4
 284                         
 285  000000                                 EXTERN   TIM1_CCER1.w  ; TIM1 Capture/Compare enable 
                                                                ;register 1
 286                         
 287  000000                                 EXTERN   TIM1_CCER2.w  ; TIM1 Capture/Compare enable 
                                                                ;register 2
 288                         
 289  000000                                 EXTERN   TIM1_CNTRH.w  ; Data bits High
 290                         
 291  000000                                 EXTERN   TIM1_CNTRL.w  ; Data bits Low
 292                         
 293  000000                                 EXTERN   TIM1_PSCRH.w  ; Data bits High
 294                         
 295  000000                                 EXTERN   TIM1_PSCRL.w  ; Data bits Low
 296                         
 297  000000                                 EXTERN   TIM1_ARRH.w   ; Data bits High
 298                         
 299  000000                                 EXTERN   TIM1_ARRL.w   ; Data bits Low
 300                         
 301  000000                                 EXTERN   TIM1_RCR.w    ; TIM1 Repetition counter 
                                                                ;register
 302                         
 303  000000                                 EXTERN   TIM1_CCR1H.w  ; Data bits High
 304                         
 305  000000                                 EXTERN   TIM1_CCR1L.w  ; Data bits Low
 306                         
 307  000000                                 EXTERN   TIM1_CCR2H.w  ; Data bits High
 308                         
 309  000000                                 EXTERN   TIM1_CCR2L.w  ; Data bits Low
 310                         
 311  000000                                 EXTERN   TIM1_CCR3H.w  ; Data bits High
 312                         
 313  000000                                 EXTERN   TIM1_CCR3L.w  ; Data bits Low
 314                         
 315  000000                                 EXTERN   TIM1_CCR4H.w  ; Data bits High
 316                         
 317  000000                                 EXTERN   TIM1_CCR4L.w  ; Data bits Low
 318                         
STMicroelectronics assembler v4.52   (C)1987-2018   Thu Dec 20 01:10:39 2018
Page 14  Assembler
                                               e:\stm8s\electronic_scale\adc.asm

 319  000000                                 EXTERN   TIM1_BKR.w    ; TIM1 Break register
 320                         
 321  000000                                 EXTERN   TIM1_DTR.w    ; TIM1 Dead-time register
 322                         
 323  000000                                 EXTERN   TIM1_OISR.w   ; TIM1 Output idle state 
                                                                ;register
 324                         
 325                         ; 16-Bit Timer 2 (TIM2)
 326                         ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
                               ;;;;;;
 327                         
 328  000000                                 EXTERN   TIM2_CR1.w    ; TIM2 Control register 1
 329                         
 330  000000                                 EXTERN   TIM2_IER.w    ; TIM2 Interrupt enable 
                                                                ;register
 331                         
 332  000000                                 EXTERN   TIM2_SR1.w    ; TIM2 Status register 1
 333                         
 334  000000                                 EXTERN   TIM2_SR2.w    ; TIM2 Status register 2
 335                         
 336  000000                                 EXTERN   TIM2_EGR.w    ; TIM2 Event Generation 
                                                                ;register
 337                         
 338  000000                                 EXTERN   TIM2_CCMR1.w  ; TIM2 Capture/Compare mode 
                                                                ;register 1
 339                         
 340  000000                                 EXTERN   TIM2_CCMR2.w  ; TIM2 Capture/Compare mode 
                                                                ;register 2
 341                         
 342  000000                                 EXTERN   TIM2_CCMR3.w  ; TIM2 Capture/Compare mode 
                                                                ;register 3
 343                         
 344  000000                                 EXTERN   TIM2_CCER1.w  ; TIM2 Capture/Compare enable 
                                                                ;register 1
 345                         
 346  000000                                 EXTERN   TIM2_CCER2.w  ; TIM2 Capture/Compare enable 
                                                                ;register 2
 347                         
 348  000000                                 EXTERN   TIM2_CNTRH.w  ; Data bits High
 349                         
 350  000000                                 EXTERN   TIM2_CNTRL.w  ; Data bits Low
 351                         
 352  000000                                 EXTERN   TIM2_PSCR.w   ; TIM2 Prescaler register
 353                         
 354  000000                                 EXTERN   TIM2_ARRH.w   ; Data bits High
 355                         
 356  000000                                 EXTERN   TIM2_ARRL.w   ; Data bits Low
 357                         
 358  000000                                 EXTERN   TIM2_CCR1H.w  ; Data bits High
 359                         
 360  000000                                 EXTERN   TIM2_CCR1L.w  ; Data bits Low
 361                         
 362  000000                                 EXTERN   TIM2_CCR2H.w  ; Data bits High
 363                         
 364  000000                                 EXTERN   TIM2_CCR2L.w  ; Data bits Low
 365                         
 366  000000                                 EXTERN   TIM2_CCR3H.w  ; Data bits High
STMicroelectronics assembler v4.52   (C)1987-2018   Thu Dec 20 01:10:39 2018
Page 15  Assembler
                                               e:\stm8s\electronic_scale\adc.asm

 367                         
 368  000000                                 EXTERN   TIM2_CCR3L.w  ; Data bits Low
 369                         
 370                         ; 16-Bit Timer 3 (TIM3)
 371                         ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
                               ;;;;;;
 372                         
 373  000000                                 EXTERN   TIM3_CR1.w    ; TIM3 Control register 1
 374                         
 375  000000                                 EXTERN   TIM3_IER.w    ; TIM3 Interrupt enable 
                                                                ;register
 376                         
 377  000000                                 EXTERN   TIM3_SR1.w    ; TIM3 Status register 1
 378                         
 379  000000                                 EXTERN   TIM3_SR2.w    ; TIM3 Status register 2
 380                         
 381  000000                                 EXTERN   TIM3_EGR.w    ; TIM3 Event Generation 
                                                                ;register
 382                         
 383  000000                                 EXTERN   TIM3_CCMR1.w  ; TIM3 Capture/Compare mode 
                                                                ;register 1
 384                         
 385  000000                                 EXTERN   TIM3_CCMR2.w  ; TIM3 Capture/Compare mode 
                                                                ;register 2
 386                         
 387  000000                                 EXTERN   TIM3_CCER1.w  ; TIM3 Capture/Compare enable 
                                                                ;register 1
 388                         
 389  000000                                 EXTERN   TIM3_CNTRH.w  ; Data bits High
 390                         
 391  000000                                 EXTERN   TIM3_CNTRL.w  ; Data bits Low
 392                         
 393  000000                                 EXTERN   TIM3_PSCR.w   ; TIM3 Prescaler register
 394                         
 395  000000                                 EXTERN   TIM3_ARRH.w   ; Data bits High
 396                         
 397  000000                                 EXTERN   TIM3_ARRL.w   ; Data bits Low
 398                         
 399  000000                                 EXTERN   TIM3_CCR1H.w  ; Data bits High
 400                         
 401  000000                                 EXTERN   TIM3_CCR1L.w  ; Data bits Low
 402                         
 403  000000                                 EXTERN   TIM3_CCR2H.w  ; Data bits High
 404                         
 405  000000                                 EXTERN   TIM3_CCR2L.w  ; Data bits Low
 406                         
 407                         ; 8-Bit  Timer 4 (TIM4)
 408                         ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
                               ;;;;;;
 409                         
 410  000000                                 EXTERN   TIM4_CR1.w    ; TIM4 Control register 1
 411                         
 412  000000                                 EXTERN   TIM4_IER.w    ; TIM4 Interrupt enable 
                                                                ;register
 413                         
 414  000000                                 EXTERN   TIM4_SR.w     ; TIM4 Status register
 415                         
STMicroelectronics assembler v4.52   (C)1987-2018   Thu Dec 20 01:10:39 2018
Page 16  Assembler
                                               e:\stm8s\electronic_scale\adc.asm

 416  000000                                 EXTERN   TIM4_EGR.w    ; TIM4 Event Generation 
                                                                ;register
 417                         
 418  000000                                 EXTERN   TIM4_CNTR.w   ; TIM4 Counter
 419                         
 420  000000                                 EXTERN   TIM4_PSCR.w   ; TIM4 Prescaler register
 421                         
 422  000000                                 EXTERN   TIM4_ARR.w    ; TIM4 Auto-reload register
 423                         
 424                         ; 10-Bit A/D Converter (ADC1)
 425                         ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
                               ;;;;;;
 426                         
 427  000000                                 EXTERN   ADC_DB0RH.w   ; Data Buffer register 0 High
 428                         
 429  000000                                 EXTERN   ADC_DB0RL.w   ; Data Buffer register 0 Low
 430                         
 431  000000                                 EXTERN   ADC_DB1RH.w   ; Data Buffer register 1 High
 432                         
 433  000000                                 EXTERN   ADC_DB1RL.w   ; Data Buffer register 1 Low
 434                         
 435  000000                                 EXTERN   ADC_DB2RH.w   ; Data Buffer register 2 High
 436                         
 437  000000                                 EXTERN   ADC_DB2RL.w   ; Data Buffer register 2 Low
 438                         
 439  000000                                 EXTERN   ADC_DB3RH.w   ; Data Buffer register 3 High
 440                         
 441  000000                                 EXTERN   ADC_DB3RL.w   ; Data Buffer register 3 Low
 442                         
 443  000000                                 EXTERN   ADC_DB4RH.w   ; Data Buffer register 4 High
 444                         
 445  000000                                 EXTERN   ADC_DB4RL.w   ; Data Buffer register 4 Low
 446                         
 447  000000                                 EXTERN   ADC_DB5RH.w   ; Data Buffer register 5 High
 448                         
 449  000000                                 EXTERN   ADC_DB5RL.w   ; Data Buffer register 5 Low
 450                         
 451  000000                                 EXTERN   ADC_DB6RH.w   ; Data Buffer register 6 High
 452                         
 453  000000                                 EXTERN   ADC_DB6RL.w   ; Data Buffer register 6 Low
 454                         
 455  000000                                 EXTERN   ADC_DB7RH.w   ; Data Buffer register 7 High
 456                         
 457  000000                                 EXTERN   ADC_DB7RL.w   ; Data Buffer register 7 Low
 458                         
 459  000000                                 EXTERN   ADC_DB8RH.w   ; Data Buffer register 8 High
 460                         
 461  000000                                 EXTERN   ADC_DB8RL.w   ; Data Buffer register 8 Low
 462                         
 463  000000                                 EXTERN   ADC_DB9RH.w   ; Data Buffer register 9 High
 464                         
 465  000000                                 EXTERN   ADC_DB9RL.w   ; Data Buffer register 9 Low
 466                         
 467  000000                                 EXTERN   ADC_CSR.w     ; ADC Control/Status Register
 468                         
 469  000000                                 EXTERN   ADC_CR1.w     ; ADC Configuration Register 1
 470                         
STMicroelectronics assembler v4.52   (C)1987-2018   Thu Dec 20 01:10:39 2018
Page 17  Assembler
                                               e:\stm8s\electronic_scale\adc.asm

 471  000000                                 EXTERN   ADC_CR2.w     ; ADC Configuration Register 2
 472                         
 473  000000                                 EXTERN   ADC_CR3.w     ; ADC Configuration Register 3
 474                         
 475  000000                                 EXTERN   ADC_DRH.w     ; Data bits High
 476                         
 477  000000                                 EXTERN   ADC_DRL.w     ; Data bits Low
 478                         
 479  000000                                 EXTERN   ADC_TDRH.w    ; Schmitt trigger disable High
 480                         
 481  000000                                 EXTERN   ADC_TDRL.w    ; Schmitt trigger disable Low
 482                         
 483  000000                                 EXTERN   ADC_HTRH.w    ; High Threshold Register High
 484                         
 485  000000                                 EXTERN   ADC_HTRL.w    ; High Threshold Register Low
 486                         
 487  000000                                 EXTERN   ADC_LTRH.w    ; Low Threshold Register High
 488                         
 489  000000                                 EXTERN   ADC_LTRL.w    ; Low Threshold Register Low
 490                         
 491  000000                                 EXTERN   ADC_AWSRH.w   ; Analog Watchdog Status 
                                                                ;register High
 492                         
 493  000000                                 EXTERN   ADC_AWSRL.w   ; Analog Watchdog Status 
                                                                ;register Low
 494                         
 495  000000                                 EXTERN   ADC_AWCRH.w   ; Analog Watchdog Control 
                                                                ;register High
 496                         
 497  000000                                 EXTERN   ADC_AWCRL.w   ; Analog Watchdog Control 
                                                                ;register Low
 498                         
 499                         ;  Global configuration register (CFG)
 500                         ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
                               ;;;;;;
 501                         
 502  000000                                 EXTERN   CFG_GCR.w     ; CFG Global configuration 
                                                                ;register
 503                         
 504                         ; Interrupt Software Priority Register (ITC)
 505                         ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
                               ;;;;;;
 506                         
 507  000000                                 EXTERN   ITC_SPR1.w    ; Interrupt Software priority 
                                                                ;register 1
 508                         
 509  000000                                 EXTERN   ITC_SPR2.w    ; Interrupt Software priority 
                                                                ;register 2
 510                         
 511  000000                                 EXTERN   ITC_SPR3.w    ; Interrupt Software priority 
                                                                ;register 3
 512                         
 513  000000                                 EXTERN   ITC_SPR4.w    ; Interrupt Software priority 
                                                                ;register 4
 514                         
 515  000000                                 EXTERN   ITC_SPR5.w    ; Interrupt Software priority 
                                                                ;register 5
STMicroelectronics assembler v4.52   (C)1987-2018   Thu Dec 20 01:10:39 2018
Page 18  Assembler
                                               e:\stm8s\electronic_scale\adc.asm

 516                         
 517  000000                                 EXTERN   ITC_SPR6.w    ; Interrupt Software priority 
                                                                ;register 6
 518                         
 519  000000                                 EXTERN   ITC_SPR7.w    ; Interrupt Software priority 
                                                                ;register 7
 520                         
 521  000000                                 #endif                 ; __STM8S105K__
<END_OF_INCLUSION>
   6                                   
   7  000000                                 #ENDIF   
   8                         
   9                         
<END_OF_INCLUSION>
   0  000000                                 #include "GlobalVar.inc"
   1                         
   2  000000                                 #IFDEF   1
   3                                   
   4  000000                                 #ELSE    
 314                                   
 315                                   
<END_OF_INCLUSION>
   0  000000                                 #include "MacroFunction.inc"
   1                         
   2                                   
   3                                   
   4  000000                                 #IFDEF   1
   5                                   
   6  000000                                 #ELSE    
 103                                   
 104                                   
 105                                   
 106                                   
 107                                   
 108                                   
 109                                   
 110                                   
<END_OF_INCLUSION>
   0  000000                                 #include "Common.inc"
   1                                   
   2  000000                                 #IFDEF   1
   3                                   
   4  000000                                 #ELSE    
  20                                   
  21                                   
<END_OF_INCLUSION>
  11                                   
  12                         
  13                                                          ;#define LCD_OE PB_ODR,#3
  14  000000                                 #define  LCD_RS PB_ODR,#5
  15  000000                                 #define  LCD_RW PB_ODR,#4
  16  000000                                 #define  LCD_E PB_ODR,#3
  17  000000                                 #define  LCD_SER PD_ODR,#2
  18  000000                                 #define  LCD_SRCLK PD_ODR,#5
  19  000000                                 #define  LCD_RCK PD_ODR,#3
  20                                   
  21                                   
  22  000000                                 #define  CHAR_I 0
  23  000000                                 #define  CHAR_I_R 1
  24  000000                                 #define  CHAR_II 2
  25  000000                                 #define  CHAR_II_R 3
  26  000000                                 #define  CHAR_III 4
STMicroelectronics assembler v4.52   (C)1987-2018   Thu Dec 20 01:10:39 2018
Page 19  Assembler
                                               e:\stm8s\electronic_scale\adc.asm

  27  000000                                 #define  CHAR_III_R 5
  28                                   
  29                                                          ;#define LCD_OE PB_ODR,#0
  30                                   
  31                                   
  32  000000                                 #define  LCD_CMD_INIT #00111000B
  33                                                          ;   enable display, no cursor, 
                                                                ;no twinkle
  34  000000                                 #define  LCD_CMD_ON #00001100B
  35                                                          ;   disable display, no cursor, 
                                                                ;no twinkle
  36  000000                                 #define  LCD_CMD_OFF #0000000B
  37  000000                                 #define  LCD_CMD_CLEAR #01H
  38  000000                                 #define  LCD_CMD_FOSC_ON #00001101B
  39  000000                                 #define  LCD_CMD_FOSC_OFF #00001100B
  40                                   
  41                                   
  42                                   
  43  000000                                 EXTERN   LCD_Init.W
  44  000000                                 EXTERN   LCD_WriChar.W
  45  000000                                 EXTERN   LCD_WriCMD.W
  46  000000                                 EXTERN   LCD_WriData.W
  47  000000                                 EXTERN   LCD_SerData.W
  48  000000                                 EXTERN   LCD_WriString.W
  49  000000                                 EXTERN   LCD_SetCursor.W
  50  000000                                 EXTERN   LCD_InitCustom.W
  51                                                          ;EXTERN LCD_ClearLine.W
  52                                   
  53  000000                                 EXTERN   EMPTY_LINE.W
  54                         ;
  55                         ;
  56                         ;
  57                         ;
  58  000000                                 #ENDIF   
  59                                   
  60                                   
  61                         
  62                                   
  63                                   
  64                                   
  65                                   
  66                                   
  67                                   
  68                                   
  69                         
  70                         
<END_OF_INCLUSION>
  10                                   
   0  000000                                 #include "GlobalVar.inc"
   1                         
   2  000000                                 #IFDEF   1
   3                                   
   4  000000                                 #ELSE    
 314                                   
 315                                   
<END_OF_INCLUSION>
   0  000000                                 #include "Common.inc"
   1                                   
   2  000000                                 #IFDEF   1
STMicroelectronics assembler v4.52   (C)1987-2018   Thu Dec 20 01:10:39 2018
Page 20  Assembler
                                               e:\stm8s\electronic_scale\adc.asm

   3                                   
   4  000000                                 #ELSE    
  20                                   
  21                                   
<END_OF_INCLUSION>
  13                                   
  14                         ;***********************************************************
  15                         ;name   :(void)
  16                         ;          PrintChar (cor_x: x,
  17                         ;                     cor_y: y,
  18                         ;                     _char: char)
  19                         ;fun    : print char to LCD
  20                         ;***********************************************************
  21  000000                       PrintChar  MACRO    cor_x,cor_y,_char
  22                                   mov      LCD_VAR0, cor_x
  23                                   mov      LCD_VAR1, cor_y
  24                                   mov      LCD_VAR2, _char
  25                                   call     LCD_WriChar
  26  000000                                 MEND     
  27                         
  28                         ;***********************************************************
  29                         ;name   :(void)
  30                         ;          LCD_ClearLine (line: _line)
  31                         ;fun    : print char to LCD
  32                         ;***********************************************************
  33  000000                       LCD_ClearLine  MACRO    _line
  34                                   PrintStr #0, #{_line+1}, #EMPTY_LINE
  35  000000                                 MEND     
  36                         
  37                         
  38                         ;***********************************************************
  39                         ;name   :(void)
  40                         ;          LCD_Scmd (_cmd: cmd)
  41                         ;fun    : print char to LCD
  42                         ;***********************************************************
  43  000000                       LCD_SCmd  MACRO    _cmd
  44                                   ld       A, _cmd
  45                                   call     LCD_WriCMD
  46  000000                                 MEND     
  47                                   
  48                         ;***********************************************************
  49                         ;name   :(void)
  50                         ;          LCD_SetCursor (_cmd: cmd)
  51                         ;fun    : print char to LCD
  52                         ;***********************************************************
  53  000000                       LCD_SetCursor_Macro  MACRO    _x,_y
  54                                   mov      LCD_VAR0, _x
  55                                   mov      LCD_VAR1, _y
  56                                   call     LCD_SetCursor
  57  000000                                 MEND     
  58                         
  59                                   
  60                         ;***********************************************************
  61                         ;name   :(void)
  62                         ;          LCD_Clear ()
  63                         ;fun    : clear LCD
  64                         ;***********************************************************
  65  000000                       LCD_Clear  MACRO    
STMicroelectronics assembler v4.52   (C)1987-2018   Thu Dec 20 01:10:39 2018
Page 21  Assembler
                                               e:\stm8s\electronic_scale\adc.asm

  66                                   ld       A, #01H
  67                                   call     LCD_WriCMD
  68  000000                                 MEND     
  69                         
  70                         ;***********************************************************
  71                         ;name   :(void)
  72                         ;          PrintStr (start_x: start_x,
  73                         ;                    start_y: start_y,
  74                         ;                    str_ptr.W: str_ptr)
  75                         ;fun    : print char to LCD,
  76                         ;         string end with 0
  77                         ;***********************************************************
  78  000000                       PrintStr  MACRO    start_x,start_y,str_ptr
  79                                   pushw    X
  80                                   mov      LCD_VAR0, start_x
  81                                   mov      LCD_VAR1, start_y
  82                                   ldw      X, str_ptr
  83                                   call     LCD_WriString
  84                                   popw     X
  85  000000                                 MEND     
  86                         
  87                         ;***********************************************************
  88                         ;name   : (Quotient: X, Remainder: Y)
  89                         ;           ADC_Convert (X: _divisor)
  90                         ;fun    : divide from [NET_ADC2:NET_ADC1:NET_ADC0]
  91                         ;***********************************************************
  92  000000                       ADC_Convert  MACRO    _divisor
  93                                   ldw      X, _divisor
  94                                   call     MassDivider
  95  000000                                 MEND     
  96                         
  97                         
  98                         
  99                         
 100                         
 101                                   
 102  000000                                 #ENDIF   
 103                                   
 104                                   
 105                                   
 106                                   
 107                                   
 108                                   
 109                                   
 110                                   
<END_OF_INCLUSION>
   0  000000                                 #include "LCD.inc"
   1                                   
   2  000000                                 #IFDEF   1 1
   3                                   
   4  000000                                 #ELSE    
  59                                   
  60                                   
  61                         
  62                                   
  63                                   
  64                                   
  65                                   
STMicroelectronics assembler v4.52   (C)1987-2018   Thu Dec 20 01:10:39 2018
Page 22  Assembler
                                               e:\stm8s\electronic_scale\adc.asm

  66                                   
  67                                   
  68                                   
  69                         
  70                         
<END_OF_INCLUSION>
   8                                                          ;#include "Key.inc"
   0  000000                                 #include "ADC_Handler.inc"
   1                         
   2  000000 U                               #IFDEF   __ADC_Handler_
   5  000000                                 #define  __ADC_Handler_ 1
   6                         
   7                                                          ;#include "ADC.inc"
   0  000000                                 #include "Common.inc"
   1                                   
   2  000000                                 #IFDEF   1
   3                                   
   4  000000                                 #ELSE    
  20                                   
  21                                   
<END_OF_INCLUSION>
   0  000000                                 #include "GlobalVar.inc"
   1                         
   2  000000                                 #IFDEF   1
   3                                   
   4  000000                                 #ELSE    
 314                                   
 315                                   
<END_OF_INCLUSION>
   0  000000                                 #include "MacroFunction.inc"
   1                         
   2                                   
   3                                   
   4  000000                                 #IFDEF   1
   5                                   
   6  000000                                 #ELSE    
 103                                   
 104                                   
 105                                   
 106                                   
 107                                   
 108                                   
 109                                   
 110                                   
<END_OF_INCLUSION>
  11                                                          ;#include "LCD.inc"
   0  000000                                 #include "Key.inc"
   1                         
   2  000000 U                               #IFDEF   __KEY_
   5  000000                                 #define  __KEY_ 1
   6                         
   7  000000                                 #define  KEY_ZERO PB_IDR,#0
   8  000000                                 #define  KEY_ARRAY PE_IDR,#5
   9                                   
  10  000000                                 #define  KEY_ROW1 PC_ODR,#7
  11  000000                                 #define  KEY_ROW2 PC_ODR,#6
  12  000000                                 #define  KEY_ROW3 PC_ODR,#5
  13  000000                                 #define  KEY_ROW4 PC_ODR,#4
  14                                   
  15  000000                                 #define  KEY_COL1 PC_IDR,#3
  16  000000                                 #define  KEY_COL2 PC_IDR,#2
STMicroelectronics assembler v4.52   (C)1987-2018   Thu Dec 20 01:10:39 2018
Page 23  Assembler
                                               e:\stm8s\electronic_scale\adc.asm

  17  000000                                 #define  KEY_COL3 PC_IDR,#1
  18                                   
  19  000000                                 #define  KEY_NUM_DOT 0FEH
  20                                   
  21                                   
  22                         
  23  000000                                 EXTERN   KeyZero_Init.W
  24  000000                                 EXTERN   KeyZero_Handler.L
  25                                   
  26  000000                                 EXTERN   KeyArray_Init.W
  27  000000                                 EXTERN   KeyArray_Scan.W
  28  000000                                 EXTERN   KeyArray_Handler.L
  29  000000                                 EXTERN   KeyArray_Settle.W
  30  000000                                 EXTERN   KeyArray_Display.W
  31  000000                                 EXTERN   TypingCursorFlash.W
  32  000000                                 EXTERN   PriceAlign.W
  33  000000                                 EXTERN   MoneyHandle.W
  34  000000                                 EXTERN   Cal_Money.W
  35                                   
  36  000000                                 #ENDIF   
<END_OF_INCLUSION>
   0  000000                                 #include "Beeper.inc"
   1                                   
   2  000000 U                               #IFDEF   __BEEPER_
   5                                   
   6  000000                                 #define  __BEEPER_ 1
   0  000000                                 #include "stm8s105k4.inc"
   1                         ; STM8S105K4.inc
   2  000000                                 #IFDEF   1
   3  000000                                 #ELSE    
   8                         
   9                         
<END_OF_INCLUSION>
   0  000000                                 #include "GlobalVar.inc"
   1                         
   2  000000                                 #IFDEF   1
   3                                   
   4  000000                                 #ELSE    
 314                                   
 315                                   
<END_OF_INCLUSION>
   9                                   
  10  000000                                 EXTERN   ThresholdCheck.W
  11                                   
  12  000000                                 #ENDIF   
  13                                   
<END_OF_INCLUSION>
  14                                   
  15  000000                                 #define  ADC_MOVING_NUM 18
  16  000000                                 #define  ADC_MOVING_BYTE 3
  17                                   
  18                                   
  19                                   
  20  000000                                 EXTERN   ADC_Add_Sum.W
  21  000000                                 EXTERN   ADC_Sub_Sum.W
  22                                   
  23                                   
  24                                   
  25  000000                                 EXTERN   ADC_Moving_Avg.W
  26  000000                                 EXTERN   ADC_Convert_Mass.W
  27  000000                                 EXTERN   ADC_Find_Max.W
STMicroelectronics assembler v4.52   (C)1987-2018   Thu Dec 20 01:10:39 2018
Page 24  Assembler
                                               e:\stm8s\electronic_scale\adc.asm

  28  000000                                 EXTERN   ADC_Find_Min.W
  29                                   
  30                                   
  31  000000                                 #ENDIF   
  32                                   
  33                                   
  34                                   
<END_OF_INCLUSION>
   0  000000                                 #include "stm8s105k4.inc"
   1                         ; STM8S105K4.inc
   2  000000                                 #IFDEF   1
   3  000000                                 #ELSE    
   8                         
   9                         
<END_OF_INCLUSION>
  11                         
  12  000000                                 #define  ADC_SCK PD_ODR,#6
  13  000000                                 #define  ADC_DOUT PD_IDR,#7
  14  000000                                 #define  ADC_DIN PF_ODR,#4
  15  000000                                 #define  ADC_DRDY PD_IDR,#0
  16                                   
  17  000000                                 #define  18 18
  18  000000                                 #define  3 3
  19                                                          ;#define ADC_SLOPE #101
  20                                                          ; ADC = Weight * Slope
  21                                   
  22  000000                                 EXTERN   ADC_Init.W
  23                                   
  24  000000                                 EXTERN   ADC_Recv_Sv.W
  25  000000                                 EXTERN   ADC_Cal_Handler.L
  26  000000                                 EXTERN   ADC_SerData.W
  27                         
  28                                   
<END_OF_INCLUSION>
   4                                   
   5                                   
   6  000000                                 EXTERN   DispADC.W
   7  000000                                 EXTERN   DispMass.W
   8  000000                                 EXTERN   MassHex2DecChar.W
   9                                   
  10  000000                                 INTEL    
  11                                   segment  'rom'
  12                                   
  13                         ;***********************************************************
  14                         ;name   : ADC_Init()
  15                         ;fun    :
  16                         ;params :   
  17                         ;           IN  : 
  18                         ;           OUT : 
  19                         ;***********************************************************
  20                         .ADC_Init.W  
  21  000000   8A                            push     CC
  22  000001   88                            push     A
  23                                                          ; PD6 = PD_SCK  => OUTPUT
  24                                                          ;
  25                                                          ;bset ADC_SCK
  26  000002 X 721C0000                      bset     PD_ODR,#6
  27  000006 X 721C0000                      bset     PD_DDR, #6
  28  00000A X 721C0000                      bset     PD_CR1, #6    ; open drain for debug
  29  00000E X 721C0000                      bset     PD_CR2, #6
STMicroelectronics assembler v4.52   (C)1987-2018   Thu Dec 20 01:10:39 2018
Page 25  Assembler
                                               e:\stm8s\electronic_scale\adc.asm

  30                         
  31                                                          ; PD6 = DOUT
  32  000012 X 721F0000                      bres     PD_DDR, #7
  33  000016 X 721F0000                      bres     PD_CR2, #7
  34  00001A X 721F0000                      bres     PD_CR1, #7
  35                                   
  36                                                          ; PD0 = DRDY => INPUT interrupt 
                                                                ;: falling and low
  37  00001E X 72110000                      bres     PD_DDR, #0
  38  000022 X 72110000                      bres     PD_CR1, #0
  39                                   
  40                                                          ; PF4 = DIN => OUTPUT 
  41  000026 X 72180000                      bset     PF_ODR,#4
  42  00002A X 72180000                      bset     PF_DDR, #4
  43  00002E X 72180000                      bset     PF_CR1, #4    ; open drain for debug
  44  000032 X 72180000                      bset     PF_CR2, #4
  45                                   
  46  000036   9B                            sim      
  47  000037 X C60000                        ld       A, EXTI_CR1
  48  00003A   A43F                          and      A, #00111111B
  49                                                          ;or A, #10000000B
  50                                                          ;and A, #10111111B
  51  00003C X C70000                        ld       EXTI_CR1, A
  52                                   
  53                                   
  54                                                          ; init ADC_NEXT_PTR
  55  00003F X 3F00                          clr      {ADC_NEXT_PTR+0}
  56  000041 X 3F00                          clr      {ADC_NEXT_PTR+1}
  57                         
  58                                                          ;clr {ADC_MIN_PTR+0}
  59                                                          ;mov {ADC_MIN_PTR+1}, #9
  60                                   
  61                                                          ;clr {ADC_MAX_PTR+0}
  62                                                          ;mov {ADC_MAX_PTR+1}, #6
  63                                   
  64                                   
  65  000043 X C60000                        ld       A, ITC_SPR2
  66  000046   A4CF                          and      A, #11001111B
  67  000048 X C70000                        ld       ITC_SPR2, A
  68                                   
  69                                   
  70  00004B X 72100000                      bset     PD_CR2, #0
  71                                   
  72                                   
  73                                   
  74  00004F X 721C0000                      bset     PD_ODR,#6
  75  000053 X 721E0000                      bset     PD_IDR,#7
  76  000057 X 72180000                      bset     PF_ODR,#4
  77  00005B X 72100000                      bset     PD_IDR,#0
  78                                   
  79  00005F X 72100000                      bset     PD_ODR, #0
  80  000063 X 721C0000                      bset     PD_ODR, #6
  81                                   
  82                                   
  83                                   
  84  000067 R CD0000                        call     ADC_Config
  85                                   
STMicroelectronics assembler v4.52   (C)1987-2018   Thu Dec 20 01:10:39 2018
Page 26  Assembler
                                               e:\stm8s\electronic_scale\adc.asm

  86  00006A   9A                            rim      
  87                                   
  88                                   
  89                                   
  90                         
  91                                   
  92                                   
  93                                   
  94  00006B   84                            pop      A
  95  00006C   86                            pop      CC
  96  00006D   81                            ret      
  97                         
  98                         ;***********************************************************
  99                         ;name   : ADC_Config()
 100                         ;fun    :
 101                         ;params :   
 102                         ;           IN  : 
 103                         ;           OUT : 
 104                         ;***********************************************************
 105                         .ADC_Config.W  
 106  00006E   8A                            push     CC
 107  00006F   88                            push     A
 108                                                          ; reset TM7705
 109                                   
 110  000070 R CD0000                        call     ADC_Reset
 111                                                          ; activate write mode
 112                                                          ;ld A, #00H
 113                                                          ;call ADC_SerData
 114                         
 115                                                          ; 
 116                                   
 117                                                          ; activate test register
 118                                                          ;ld A, #40H
 119                                                          ;call ADC_WriData
 120                                   
 121                                                          ;ld A, #01H
 122                                                          ;call ADC_WriData
 123                                   
 124                                                          ; activate clock register
 125                         
 126  000073   A620                          ld       A, #20H
 127  000075 R CD0000                        call     ADC_WriData
 128  000078 X CD0000                        call     ADC_Delay
 129  00007B   A68C                          ld       A, #8CH
 130  00007D R CD0000                        call     ADC_WriData
 131  000080 X CD0000                        call     ADC_Delay
 132                                   
 133                         
 134                                   
 135                                   
 136                                                          ; activate settings register
 137                                   
 138  000083   A610                          ld       A, #10H
 139  000085 R CD0000                        call     ADC_WriData
 140  000088 X CD0000                        call     ADC_Delay
 141  00008B   A646                          ld       A, #46H
 142  00008D R CD0000                        call     ADC_WriData
STMicroelectronics assembler v4.52   (C)1987-2018   Thu Dec 20 01:10:39 2018
Page 27  Assembler
                                               e:\stm8s\electronic_scale\adc.asm

 143  000090 X CD0000                        call     ADC_Delay
 144                                   
 145                         
 146  000093 X CD0000                        call     ADC_Delay
 147  000096 X CD0000                        call     ADC_Delay
 148  000099 X CD0000                        call     ADC_Delay
 149  00009C X CD0000                        call     ADC_Delay
 150  00009F X CD0000                        call     ADC_Delay
 151  0000A2 X CD0000                        call     ADC_Delay
 152  0000A5 X CD0000                        call     ADC_Delay
 153                                   
 154  0000A8   84                            pop      A
 155  0000A9   86                            pop      CC
 156  0000AA   81                            ret      
 157                         
 158                         
 159                         ;***********************************************************
 160                         ;name   : ADC_Reset()
 161                         ;fun    :
 162                         ;params :   
 163                         ;           IN  : 
 164                         ;           OUT : 
 165                         ;***********************************************************
 166                         .ADC_Reset.W  
 167  0000AB   8A                            push     CC
 168  0000AC   88                            push     A
 169                                   
 170  0000AD   A630                          ld       A, #48
 171                         adc_reset_loop:  
 172  0000AF X 72180000                      bset     PF_ODR,#4
 173  0000B3 X CD0000                        call     ADC_Delay
 174  0000B6 X 721D0000                      bres     PD_ODR,#6
 175  0000BA X CD0000                        call     ADC_Delay
 176  0000BD X 721C0000                      bset     PD_ODR,#6
 177                                   
 178  0000C1   4A                            dec      A
 179  0000C2 R 26EB                          jrne     adc_reset_loop
 180                                                          ;call ADC_WriData
 181                                                          ;call ADC_WriData
 182                                                          ;call ADC_WriData
 183                                                          ;call ADC_WriData
 184                                                          ;call ADC_WriData
 185                                                          ;call ADC_WriData
 186                                                          ;call ADC_WriData
 187                                                          ;call ADC_WriData
 188                                                          ;call ADC_WriData
 189                                   
 190  0000C4   84                            pop      A
 191  0000C5   86                            pop      CC
 192  0000C6   81                            ret      
 193                         
 194                         
 195                         ;***********************************************************
 196                         ;name   : ADC_ReadData()
 197                         ;fun    :
 198                         ;params :   
 199                         ;           IN  : 
STMicroelectronics assembler v4.52   (C)1987-2018   Thu Dec 20 01:10:39 2018
Page 28  Assembler
                                               e:\stm8s\electronic_scale\adc.asm

 200                         ;           OUT : A
 201                         ;***********************************************************
 202                         .ADC_ReadData.W  
 203  0000C7   8A                            push     CC
 204                                                          ;push A
 205  0000C8   89                            pushw    X
 206                                                          ;bres ADC_SCK  
 207                                                          ;call ADC_Delay
 208                                                          ;call ADC_Delay
 209                         
 210  0000C9   4F                            clr      A
 211  0000CA   AE0008                        ldw      X, #8
 212                         read_data_start:  
 213  0000CD X CD0000                        call     ADC_Delay
 214  0000D0 X 721D0000                      bres     PD_ODR,#6   
 215  0000D4 X CD0000                        call     ADC_Delay
 216                                   
 217  0000D7 X 721C0000                      bset     PD_ODR,#6   
 218                         
 219  0000DB X CD0000                        call     ADC_Delay
 220  0000DE X 720E000000                    btjt     PD_IDR,#7,read_data_get_carry
 221                                                          ; C <= Tested bit
 222                         read_data_get_carry:  
 223  0000E3   49                            rlc      A
 224                                   
 225                         
 226  0000E4   5A                            decw     X
 227  0000E5 R 26E6                          jrne     read_data_start
 228                                   
 229                                   
 230                                   
 231  0000E7   85                            popw     X
 232                                                          ;pop A
 233  0000E8   86                            pop      CC
 234  0000E9   81                            ret      
 235                         
 236                         
 237                         ;***********************************************************
 238                         ;name   : ADC_Cal_Handler
 239                         ;from   : PD0 = falling edge and low level
 240                         ;go     : handle adc serial receiving
 241                         ;params :
 242                         ;           IN  : NULL
 243                         ;           OUT : NULL
 244                         ;***********************************************************
 245                         .ADC_Cal_Handler.l  
 246  0000EA R                               INTERRUPT ADC_Cal_Handler
 247                                                          ;push CC
 248                                                          ;bres PD_CR2, #6
 249                                                          ; inverter
 250  0000EA X 7200000002                    btjt     PD_IDR,#0,cal_end_jp
 251  0000EF R 2003                          jra      cal_start
 252                         cal_end_jp:  
 253  0000F1 R CC0000                        jp       cal_end
 254                                   
 255                         cal_start:  
 256                                                          ;LCD_SCmd LCD_CMD_FOSC_OFF
STMicroelectronics assembler v4.52   (C)1987-2018   Thu Dec 20 01:10:39 2018
Page 29  Assembler
                                               e:\stm8s\electronic_scale\adc.asm

 257                                                          ;sim
 258  0000F4 X CD0000                        call     ADC_Delay
 259  0000F7 R CD0000                        call     ADC_Recv_Sv
 260                         
 261  0000FA X CD0000                        call     ADC_Moving_Avg
 262                         
 263  0000FD X CD0000                        call     ADC_Convert_Mass
 264                                   
 265  000100 X 3C00                          inc      ADC_COUNTER
 266  000102 X B600                          ld       A, ADC_COUNTER
 267  000104   A103                          cp       A, #3
 268  000106 R 2703                          jreq     upgrate_data
 269  000108 R CC0000                        jp       show_menu_end
 270                         upgrate_data:  
 271  00010B X 35000000                      mov      ADC_COUNTER, #0
 272                                   PrintStr #0,#0,#STR_MASS
 272  00010F   89                            pushw    X
 272  000110 X 35000000                      mov      LCD_VAR0, #0
 272  000114 X 35000000                      mov      LCD_VAR1, #0
 272  000118 X AE0000                        ldw      X, #STR_MASS
 272  00011B X CD0000                        call     LCD_WriString
 272  00011E   85                            popw     X
 273  00011F                                 
 274  00011F X CD0000                        call     Cal_Money
 275                                   
 276                                   
 277  000122 X B600                          ld       A, KEY_ARRAY_MENU
 278  000124   A101                          cp       A, #1
 279  000126 R 2747                          jreq     show_menu_1
 280  000128   A102                          cp       A, #2
 281  00012A R 2703                          jreq     show_menu_2
 282  00012C R CC0000                        jp       show_menu_3
 283                         show_menu_2:  
 284                                   PrintChar #13, #0, #0
 284  00012F X 350D0000                      mov      LCD_VAR0, #13
 284  000133 X 35000000                      mov      LCD_VAR1, #0
 284  000137 X 35000000                      mov      LCD_VAR2, #0
 284  00013B X CD0000                        call     LCD_WriChar
 285  00013E                                 PrintChar #14, #0, #3
 285  00013E X 350E0000                      mov      LCD_VAR0, #14
 285  000142 X 35000000                      mov      LCD_VAR1, #0
 285  000146 X 35030000                      mov      LCD_VAR2, #3
 285  00014A X CD0000                        call     LCD_WriChar
 286  00014D                                 PrintChar #15, #0, #4
 286  00014D X 350F0000                      mov      LCD_VAR0, #15
 286  000151 X 35000000                      mov      LCD_VAR1, #0
 286  000155 X 35040000                      mov      LCD_VAR2, #4
 286  000159 X CD0000                        call     LCD_WriChar
 287  00015C                                 
 288                                   PrintStr #0, #1, #STR_MAX_MASS
 288  00015C   89                            pushw    X
 288  00015D X 35000000                      mov      LCD_VAR0, #0
 288  000161 X 35010000                      mov      LCD_VAR1, #1
 288  000165 X AE0000                        ldw      X, #STR_MAX_MASS
 288  000168 X CD0000                        call     LCD_WriString
 288  00016B   85                            popw     X
 289  00016C R CC0000                        jp       show_menu_end
STMicroelectronics assembler v4.52   (C)1987-2018   Thu Dec 20 01:10:39 2018
Page 30  Assembler
                                               e:\stm8s\electronic_scale\adc.asm

 290                         show_menu_1:  
 291                                   PrintChar #13, #0, #1
 291  00016F X 350D0000                      mov      LCD_VAR0, #13
 291  000173 X 35000000                      mov      LCD_VAR1, #0
 291  000177 X 35010000                      mov      LCD_VAR2, #1
 291  00017B X CD0000                        call     LCD_WriChar
 292  00017E                                 PrintChar #14, #0, #2
 292  00017E X 350E0000                      mov      LCD_VAR0, #14
 292  000182 X 35000000                      mov      LCD_VAR1, #0
 292  000186 X 35020000                      mov      LCD_VAR2, #2
 292  00018A X CD0000                        call     LCD_WriChar
 293  00018D                                 PrintChar #15, #0, #4
 293  00018D X 350F0000                      mov      LCD_VAR0, #15
 293  000191 X 35000000                      mov      LCD_VAR1, #0
 293  000195 X 35040000                      mov      LCD_VAR2, #4
 293  000199 X CD0000                        call     LCD_WriChar
 294  00019C                                 PrintStr #0, #1, #STR_PRICE
 294  00019C   89                            pushw    X
 294  00019D X 35000000                      mov      LCD_VAR0, #0
 294  0001A1 X 35010000                      mov      LCD_VAR1, #1
 294  0001A5 X AE0000                        ldw      X, #STR_PRICE
 294  0001A8 X CD0000                        call     LCD_WriString
 294  0001AB   85                            popw     X
 295  0001AC                                 PrintStr #8, #1, #STR_MONEY
 295  0001AC   89                            pushw    X
 295  0001AD X 35080000                      mov      LCD_VAR0, #8
 295  0001B1 X 35010000                      mov      LCD_VAR1, #1
 295  0001B5 X AE0000                        ldw      X, #STR_MONEY
 295  0001B8 X CD0000                        call     LCD_WriString
 295  0001BB   85                            popw     X
 296  0001BC R 203D                          jra      show_menu_end
 297                         show_menu_3:  
 298                                   PrintChar #13, #0, #0
 298  0001BE X 350D0000                      mov      LCD_VAR0, #13
 298  0001C2 X 35000000                      mov      LCD_VAR1, #0
 298  0001C6 X 35000000                      mov      LCD_VAR2, #0
 298  0001CA X CD0000                        call     LCD_WriChar
 299  0001CD                                 PrintChar #14, #0, #2
 299  0001CD X 350E0000                      mov      LCD_VAR0, #14
 299  0001D1 X 35000000                      mov      LCD_VAR1, #0
 299  0001D5 X 35020000                      mov      LCD_VAR2, #2
 299  0001D9 X CD0000                        call     LCD_WriChar
 300  0001DC                                 PrintChar #15, #0, #5
 300  0001DC X 350F0000                      mov      LCD_VAR0, #15
 300  0001E0 X 35000000                      mov      LCD_VAR1, #0
 300  0001E4 X 35050000                      mov      LCD_VAR2, #5
 300  0001E8 X CD0000                        call     LCD_WriChar
 301  0001EB                                 PrintStr #0,#1,#STR_THRESHOLD
 301  0001EB   89                            pushw    X
 301  0001EC X 35000000                      mov      LCD_VAR0, #0
 301  0001F0 X 35010000                      mov      LCD_VAR1, #1
 301  0001F4 X AE0000                        ldw      X, #STR_THRESHOLD
 301  0001F7 X CD0000                        call     LCD_WriString
 301  0001FA   85                            popw     X
 302  0001FB                                 
 303                                   
 304                         show_menu_end:  
STMicroelectronics assembler v4.52   (C)1987-2018   Thu Dec 20 01:10:39 2018
Page 31  Assembler
                                               e:\stm8s\electronic_scale\adc.asm

 305                         
 306                                                          ;call KeyArray_Display
 307                                   
 308                                                          ;LCD_SCmd LCD_CMD_FOSC_ON
 309  0001FB X CD0000                        call     TypingCursorFlash
 310                                                          ;rim
 311                                                          ;pop CC
 312                         
 313                         cal_end:  
 314                                                          ;bset PD_CR2, #6  
 315                         
 316  0001FE   80                            iret     
 317                         
 318                         ;***********************************************************
 319                         ;name   : ADC_WriData
 320                         ;fun    : 
 321                         ;params :
 322                         ;           IN  : A : written byte
 323                         ;           OUT : NULL
 324                         ;***********************************************************
 325                         .ADC_WriData.W  
 326  0001FF   8A                            push     CC
 327  000200   89                            pushw    X
 328                                   
 329                                                          ;bset ADC_SCK
 330                                   
 331  000201   AE0008                        ldw      X, #8
 332                         adc_serial_bit_loop:  
 333  000204 X CD0000                        call     ADC_Delay
 334  000207 X 721D0000                      bres     PD_ODR,#6
 335  00020B X CD0000                        call     ADC_Delay
 336  00020E X CD0000                        call     ADC_Delay
 337  000211   48                            sll      A
 338  000212 R 2506                          jrc      adc_serial_one
 339  000214 X 72190000                      bres     PF_ODR,#4
 340  000218 R 2004                          jra      adc_serial_lock
 341                         adc_serial_one:  
 342  00021A X 72180000                      bset     PF_ODR,#4
 343                                   
 344                         adc_serial_lock:  
 345  00021E X CD0000                        call     ADC_Delay
 346  000221 X 721C0000                      bset     PD_ODR,#6
 347                                   
 348  000225   5A                            decw     X
 349  000226 R 26DC                          jrne     adc_serial_bit_loop
 350                                   
 351  000228   85                            popw     X
 352  000229   86                            pop      CC
 353  00022A   81                            ret      
 354                         
 355                         
 356                         ;***********************************************************
 357                         ;name   : ADC_Recv_Sv
 358                         ;fun    : serial receive and save ADC 16bits,  
 359                         ;         3rd byte is 0x00
 360                         ;params :
 361                         ;           IN  : ADC_NEXT_PTR
STMicroelectronics assembler v4.52   (C)1987-2018   Thu Dec 20 01:10:39 2018
Page 32  Assembler
                                               e:\stm8s\electronic_scale\adc.asm

 362                         ;           OUT : ADC_SUM, ADC_STORE
 363                         ;***********************************************************
 364                         .ADC_Recv_Sv.W  
 365  00022B   88                            push     A
 366  00022C   89                            pushw    X
 367  00022D   9089                          pushw    Y
 368                                   
 369  00022F   A638                          ld       A, #38H
 370  000231 R CD0000                        call     ADC_WriData
 371  000234 X CD0000                        call     ADC_Delay
 372  000237 X CD0000                        call     ADC_Delay
 373                                   
 374                                                          ;call ADC_ReadData
 375                                                          ;call ADC_ReadData
 376                                                          ; from 3byte adc to 2byte adc, 
                                                                ;make the 3rd byte 0x00 
 377                                                          ; default , so inc ADC_NEXT_PTR 
                                                                ;before saving adc data
 378  00023A X BE00                          ldw      X, ADC_NEXT_PTR
 379  00023C   5C                            incw     X
 380  00023D X BF00                          ldw      ADC_NEXT_PTR, X
 381                                   
 382                                                          ;popw Y
 383                                                          ;popw X
 384                                                          ;pop A
 385                                                          ;ret
 386                                   
 387                                   
 388                                                          ;;;
 389                         recv_start:  
 390                         
 391  00023F   90AE0002                      ldw      Y, #2         ;3 bytes
 392                         recv_new_byte:  
 393  000243   4F                            clr      A
 394  000244   AE0008                        ldw      X, #8
 395                         recv_bit_start:  
 396  000247 X 721D0000                      bres     PD_ODR,#6
 397  00024B X CD0000                        call     ADC_Delay
 398  00024E X CD0000                        call     ADC_Delay
 399  000251 X CD0000                        call     ADC_Delay
 400  000254 X 721C0000                      bset     PD_ODR,#6   
 401                         
 402  000258 X CD0000                        call     ADC_Delay
 403                         
 404  00025B X 720E000000                    btjt     PD_IDR,#7,go_get_carry
 405                                                          ; C <= Tested bit
 406                         go_get_carry:  
 407  000260   49                            rlc      A
 408                                   
 409  000261 X CD0000                        call     ADC_Delay
 410  000264 X CD0000                        call     ADC_Delay
 411  000267 X CD0000                        call     ADC_Delay
 412                                                          ;bres ADC_SCK    
 413  00026A   5A                            decw     X
 414  00026B R 26DA                          jrne     recv_bit_start
 415                                   
 416                                                          ; store 10bits to 
STMicroelectronics assembler v4.52   (C)1987-2018   Thu Dec 20 01:10:39 2018
Page 33  Assembler
                                               e:\stm8s\electronic_scale\adc.asm

                                                                ;(ADC_NEXT_PTR->)
 417  00026D X BE00                          ldw      X, ADC_NEXT_PTR
 418  00026F X E700                          ld       (ADC_STORE,X), A
 419  000271   5C                            incw     X
 420  000272 X BF00                          ldw      ADC_NEXT_PTR, X
 421                                   
 422  000274   905A                          decw     Y
 423  000276 R 26CB                          jrne     recv_new_byte
 424                                   
 425                                                          ; ------ end recv
 426                                                          ; 25 ADC_SCK: 128 gains , 
                                                                ;channel A
 427                                                          ; 25th SCK
 428                                                          ;bset ADC_SCK
 429                         
 430                                                          ;call ADC_Delay
 431                         
 432                                                          ;bres ADC_SCK
 433                                   
 434                                                          ;;; (ADC_NEXT_PTR < 10*3) or 
                                                                ;rotate back to 0
 435                                   
 436  000278 X BE00                          ldw      X, ADC_NEXT_PTR
 437  00027A   A30036                        cpw      X, #{3*18}
 438  00027D R 2601                          jrne     recv_end
 439                                                          ;;; clear ADC_NEXT_PTR
 440  00027F   5F                            clrw     X
 441                         recv_end:  
 442  000280 X BF00                          ldw      ADC_NEXT_PTR, X
 443                                   
 444                                   
 445  000282   9085                          popw     Y
 446  000284   85                            popw     X
 447  000285   84                            pop      A
 448  000286   81                            ret      
 449                                   
 450                         
 451                                   
 452  000287                                 end      
STMicroelectronics assembler v4.52   (C)1987-2018   Thu Dec 20 01:10:39 2018
Page 34  Assembler
                                               e:\stm8s\electronic_scale\adc.asm

Symbol Name                       Value     Call       Type  Scope      Rel.  Line  Privacy  Segment   Size  Bytes File

ADC_Delay                         ????????         no  WORD  External   rel      9  private  text         0     0  e:\stm8s\electronic_scale\common.inc
ADC_COUNTER                       ????????         no  BYTE  External   rel     12  private  text         0     0  e:\stm8s\electronic_scale\globalvar.inc
ADC_SUM                           ????????         no  BYTE  External   rel     16  private  text         0     0  e:\stm8s\electronic_scale\globalvar.inc
ADC_SUM0                          ????????         no  BYTE  External   rel     17  private  text         0     0  e:\stm8s\electronic_scale\globalvar.inc
ADC_SUM1                          ????????         no  BYTE  External   rel     18  private  text         0     0  e:\stm8s\electronic_scale\globalvar.inc
ADC_SUM2                          ????????         no  BYTE  External   rel     19  private  text         0     0  e:\stm8s\electronic_scale\globalvar.inc
ADC_SUM3                          ????????         no  BYTE  External   rel     20  private  text         0     0  e:\stm8s\electronic_scale\globalvar.inc
ADC_AVG                           ????????         no  BYTE  External   rel     22  private  text         0     0  e:\stm8s\electronic_scale\globalvar.inc
ADC_AVG0                          ????????         no  BYTE  External   rel     23  private  text         0     0  e:\stm8s\electronic_scale\globalvar.inc
ADC_AVG1                          ????????         no  BYTE  External   rel     24  private  text         0     0  e:\stm8s\electronic_scale\globalvar.inc
ADC_AVG2                          ????????         no  BYTE  External   rel     25  private  text         0     0  e:\stm8s\electronic_scale\globalvar.inc
ADC_AVG3                          ????????         no  BYTE  External   rel     26  private  text         0     0  e:\stm8s\electronic_scale\globalvar.inc
ADC_STORE                         ????????         no  BYTE  External   rel     28  private  text         0     0  e:\stm8s\electronic_scale\globalvar.inc
ADC_S00                           ????????         no  BYTE  External   rel     30  private  text         0     0  e:\stm8s\electronic_scale\globalvar.inc
ADC_S01                           ????????         no  BYTE  External   rel     31  private  text         0     0  e:\stm8s\electronic_scale\globalvar.inc
ADC_S02                           ????????         no  BYTE  External   rel     32  private  text         0     0  e:\stm8s\electronic_scale\globalvar.inc
ADC_S10                           ????????         no  BYTE  External   rel     34  private  text         0     0  e:\stm8s\electronic_scale\globalvar.inc
ADC_S11                           ????????         no  BYTE  External   rel     35  private  text         0     0  e:\stm8s\electronic_scale\globalvar.inc
ADC_S12                           ????????         no  BYTE  External   rel     36  private  text         0     0  e:\stm8s\electronic_scale\globalvar.inc
ADC_S20                           ????????         no  BYTE  External   rel     38  private  text         0     0  e:\stm8s\electronic_scale\globalvar.inc
ADC_S21                           ????????         no  BYTE  External   rel     39  private  text         0     0  e:\stm8s\electronic_scale\globalvar.inc
ADC_S22                           ????????         no  BYTE  External   rel     40  private  text         0     0  e:\stm8s\electronic_scale\globalvar.inc
ADC_S30                           ????????         no  BYTE  External   rel     42  private  text         0     0  e:\stm8s\electronic_scale\globalvar.inc
ADC_S31                           ????????         no  BYTE  External   rel     43  private  text         0     0  e:\stm8s\electronic_scale\globalvar.inc
ADC_S32                           ????????         no  BYTE  External   rel     44  private  text         0     0  e:\stm8s\electronic_scale\globalvar.inc
ADC_S40                           ????????         no  BYTE  External   rel     46  private  text         0     0  e:\stm8s\electronic_scale\globalvar.inc
ADC_S41                           ????????         no  BYTE  External   rel     47  private  text         0     0  e:\stm8s\electronic_scale\globalvar.inc
ADC_S42                           ????????         no  BYTE  External   rel     48  private  text         0     0  e:\stm8s\electronic_scale\globalvar.inc
ADC_S50                           ????????         no  BYTE  External   rel     50  private  text         0     0  e:\stm8s\electronic_scale\globalvar.inc
ADC_S51                           ????????         no  BYTE  External   rel     51  private  text         0     0  e:\stm8s\electronic_scale\globalvar.inc
ADC_S52                           ????????         no  BYTE  External   rel     52  private  text         0     0  e:\stm8s\electronic_scale\globalvar.inc
ADC_S60                           ????????         no  BYTE  External   rel     54  private  text         0     0  e:\stm8s\electronic_scale\globalvar.inc
ADC_S61                           ????????         no  BYTE  External   rel     55  private  text         0     0  e:\stm8s\electronic_scale\globalvar.inc
ADC_S62                           ????????         no  BYTE  External   rel     56  private  text         0     0  e:\stm8s\electronic_scale\globalvar.inc
ADC_S70                           ????????         no  BYTE  External   rel     58  private  text         0     0  e:\stm8s\electronic_scale\globalvar.inc
ADC_S71                           ????????         no  BYTE  External   rel     59  private  text         0     0  e:\stm8s\electronic_scale\globalvar.inc
ADC_S72                           ????????         no  BYTE  External   rel     60  private  text         0     0  e:\stm8s\electronic_scale\globalvar.inc
ADC_S80                           ????????         no  BYTE  External   rel     62  private  text         0     0  e:\stm8s\electronic_scale\globalvar.inc
ADC_S81                           ????????         no  BYTE  External   rel     63  private  text         0     0  e:\stm8s\electronic_scale\globalvar.inc
ADC_S82                           ????????         no  BYTE  External   rel     64  private  text         0     0  e:\stm8s\electronic_scale\globalvar.inc
ADC_S90                           ????????         no  BYTE  External   rel     66  private  text         0     0  e:\stm8s\electronic_scale\globalvar.inc
ADC_S91                           ????????         no  BYTE  External   rel     67  private  text         0     0  e:\stm8s\electronic_scale\globalvar.inc
ADC_S92                           ????????         no  BYTE  External   rel     68  private  text         0     0  e:\stm8s\electronic_scale\globalvar.inc
ADC_SA0                           ????????         no  BYTE  External   rel     70  private  text         0     0  e:\stm8s\electronic_scale\globalvar.inc
ADC_SA1                           ????????         no  BYTE  External   rel     71  private  text         0     0  e:\stm8s\electronic_scale\globalvar.inc
ADC_SA2                           ????????         no  BYTE  External   rel     72  private  text         0     0  e:\stm8s\electronic_scale\globalvar.inc
ADC_SB0                           ????????         no  BYTE  External   rel     74  private  text         0     0  e:\stm8s\electronic_scale\globalvar.inc
ADC_SB1                           ????????         no  BYTE  External   rel     75  private  text         0     0  e:\stm8s\electronic_scale\globalvar.inc
ADC_SB2                           ????????         no  BYTE  External   rel     76  private  text         0     0  e:\stm8s\electronic_scale\globalvar.inc
ADC_SC0                           ????????         no  BYTE  External   rel     78  private  text         0     0  e:\stm8s\electronic_scale\globalvar.inc
ADC_SC1                           ????????         no  BYTE  External   rel     79  private  text         0     0  e:\stm8s\electronic_scale\globalvar.inc
ADC_SC2                           ????????         no  BYTE  External   rel     80  private  text         0     0  e:\stm8s\electronic_scale\globalvar.inc
ADC_SD0                           ????????         no  BYTE  External   rel     82  private  text         0     0  e:\stm8s\electronic_scale\globalvar.inc
ADC_SD1                           ????????         no  BYTE  External   rel     83  private  text         0     0  e:\stm8s\electronic_scale\globalvar.inc
ADC_SD2                           ????????         no  BYTE  External   rel     84  private  text         0     0  e:\stm8s\electronic_scale\globalvar.inc
STMicroelectronics assembler v4.52   (C)1987-2018   Thu Dec 20 01:10:39 2018
Page 35  Assembler
                                               e:\stm8s\electronic_scale\adc.asm

ADC_SE0                           ????????         no  BYTE  External   rel     86  private  text         0     0  e:\stm8s\electronic_scale\globalvar.inc
ADC_SE1                           ????????         no  BYTE  External   rel     87  private  text         0     0  e:\stm8s\electronic_scale\globalvar.inc
ADC_SE2                           ????????         no  BYTE  External   rel     88  private  text         0     0  e:\stm8s\electronic_scale\globalvar.inc
ADC_SF0                           ????????         no  BYTE  External   rel     90  private  text         0     0  e:\stm8s\electronic_scale\globalvar.inc
ADC_SF1                           ????????         no  BYTE  External   rel     91  private  text         0     0  e:\stm8s\electronic_scale\globalvar.inc
ADC_SF2                           ????????         no  BYTE  External   rel     92  private  text         0     0  e:\stm8s\electronic_scale\globalvar.inc
ADC_SG0                           ????????         no  BYTE  External   rel     94  private  text         0     0  e:\stm8s\electronic_scale\globalvar.inc
ADC_SG1                           ????????         no  BYTE  External   rel     95  private  text         0     0  e:\stm8s\electronic_scale\globalvar.inc
ADC_SG2                           ????????         no  BYTE  External   rel     96  private  text         0     0  e:\stm8s\electronic_scale\globalvar.inc
ADC_SH0                           ????????         no  BYTE  External   rel     98  private  text         0     0  e:\stm8s\electronic_scale\globalvar.inc
ADC_SH1                           ????????         no  BYTE  External   rel     99  private  text         0     0  e:\stm8s\electronic_scale\globalvar.inc
ADC_SH2                           ????????         no  BYTE  External   rel    100  private  text         0     0  e:\stm8s\electronic_scale\globalvar.inc
ADC_SI0                           ????????         no  BYTE  External   rel    102  private  text         0     0  e:\stm8s\electronic_scale\globalvar.inc
ADC_SI1                           ????????         no  BYTE  External   rel    103  private  text         0     0  e:\stm8s\electronic_scale\globalvar.inc
ADC_SI2                           ????????         no  BYTE  External   rel    104  private  text         0     0  e:\stm8s\electronic_scale\globalvar.inc
ADC_SJ0                           ????????         no  BYTE  External   rel    106  private  text         0     0  e:\stm8s\electronic_scale\globalvar.inc
ADC_SJ1                           ????????         no  BYTE  External   rel    107  private  text         0     0  e:\stm8s\electronic_scale\globalvar.inc
ADC_SJ2                           ????????         no  BYTE  External   rel    108  private  text         0     0  e:\stm8s\electronic_scale\globalvar.inc
ADC_SK0                           ????????         no  BYTE  External   rel    110  private  text         0     0  e:\stm8s\electronic_scale\globalvar.inc
ADC_SK1                           ????????         no  BYTE  External   rel    111  private  text         0     0  e:\stm8s\electronic_scale\globalvar.inc
ADC_SK2                           ????????         no  BYTE  External   rel    112  private  text         0     0  e:\stm8s\electronic_scale\globalvar.inc
ADC_SL0                           ????????         no  BYTE  External   rel    114  private  text         0     0  e:\stm8s\electronic_scale\globalvar.inc
ADC_SL1                           ????????         no  BYTE  External   rel    115  private  text         0     0  e:\stm8s\electronic_scale\globalvar.inc
ADC_SL2                           ????????         no  BYTE  External   rel    116  private  text         0     0  e:\stm8s\electronic_scale\globalvar.inc
ADC_SM0                           ????????         no  BYTE  External   rel    118  private  text         0     0  e:\stm8s\electronic_scale\globalvar.inc
ADC_SM1                           ????????         no  BYTE  External   rel    119  private  text         0     0  e:\stm8s\electronic_scale\globalvar.inc
ADC_SM2                           ????????         no  BYTE  External   rel    120  private  text         0     0  e:\stm8s\electronic_scale\globalvar.inc
ADC_SN0                           ????????         no  BYTE  External   rel    122  private  text         0     0  e:\stm8s\electronic_scale\globalvar.inc
ADC_SN1                           ????????         no  BYTE  External   rel    123  private  text         0     0  e:\stm8s\electronic_scale\globalvar.inc
ADC_SN2                           ????????         no  BYTE  External   rel    124  private  text         0     0  e:\stm8s\electronic_scale\globalvar.inc
ADC_SO0                           ????????         no  BYTE  External   rel    126  private  text         0     0  e:\stm8s\electronic_scale\globalvar.inc
ADC_SO1                           ????????         no  BYTE  External   rel    127  private  text         0     0  e:\stm8s\electronic_scale\globalvar.inc
ADC_SO2                           ????????         no  BYTE  External   rel    128  private  text         0     0  e:\stm8s\electronic_scale\globalvar.inc
ADC_SP0                           ????????         no  BYTE  External   rel    130  private  text         0     0  e:\stm8s\electronic_scale\globalvar.inc
ADC_SP1                           ????????         no  BYTE  External   rel    131  private  text         0     0  e:\stm8s\electronic_scale\globalvar.inc
ADC_SP2                           ????????         no  BYTE  External   rel    132  private  text         0     0  e:\stm8s\electronic_scale\globalvar.inc
ADC_SQ0                           ????????         no  BYTE  External   rel    134  private  text         0     0  e:\stm8s\electronic_scale\globalvar.inc
ADC_SQ1                           ????????         no  BYTE  External   rel    135  private  text         0     0  e:\stm8s\electronic_scale\globalvar.inc
ADC_SQ2                           ????????         no  BYTE  External   rel    136  private  text         0     0  e:\stm8s\electronic_scale\globalvar.inc
ADC_SR0                           ????????         no  BYTE  External   rel    138  private  text         0     0  e:\stm8s\electronic_scale\globalvar.inc
ADC_SR1                           ????????         no  BYTE  External   rel    139  private  text         0     0  e:\stm8s\electronic_scale\globalvar.inc
ADC_SR2                           ????????         no  BYTE  External   rel    140  private  text         0     0  e:\stm8s\electronic_scale\globalvar.inc
ADC_SS0                           ????????         no  BYTE  External   rel    142  private  text         0     0  e:\stm8s\electronic_scale\globalvar.inc
ADC_SS1                           ????????         no  BYTE  External   rel    143  private  text         0     0  e:\stm8s\electronic_scale\globalvar.inc
ADC_SS2                           ????????         no  BYTE  External   rel    144  private  text         0     0  e:\stm8s\electronic_scale\globalvar.inc
ADC_ST0                           ????????         no  BYTE  External   rel    146  private  text         0     0  e:\stm8s\electronic_scale\globalvar.inc
ADC_ST1                           ????????         no  BYTE  External   rel    147  private  text         0     0  e:\stm8s\electronic_scale\globalvar.inc
ADC_ST2                           ????????         no  BYTE  External   rel    148  private  text         0     0  e:\stm8s\electronic_scale\globalvar.inc
ADC_SU0                           ????????         no  BYTE  External   rel    150  private  text         0     0  e:\stm8s\electronic_scale\globalvar.inc
ADC_SU1                           ????????         no  BYTE  External   rel    151  private  text         0     0  e:\stm8s\electronic_scale\globalvar.inc
ADC_SU2                           ????????         no  BYTE  External   rel    152  private  text         0     0  e:\stm8s\electronic_scale\globalvar.inc
ADC_SV0                           ????????         no  BYTE  External   rel    154  private  text         0     0  e:\stm8s\electronic_scale\globalvar.inc
ADC_SV1                           ????????         no  BYTE  External   rel    155  private  text         0     0  e:\stm8s\electronic_scale\globalvar.inc
ADC_SV2                           ????????         no  BYTE  External   rel    156  private  text         0     0  e:\stm8s\electronic_scale\globalvar.inc
ADC_SW0                           ????????         no  BYTE  External   rel    158  private  text         0     0  e:\stm8s\electronic_scale\globalvar.inc
ADC_SW1                           ????????         no  BYTE  External   rel    159  private  text         0     0  e:\stm8s\electronic_scale\globalvar.inc
ADC_SW2                           ????????         no  BYTE  External   rel    160  private  text         0     0  e:\stm8s\electronic_scale\globalvar.inc
STMicroelectronics assembler v4.52   (C)1987-2018   Thu Dec 20 01:10:39 2018
Page 36  Assembler
                                               e:\stm8s\electronic_scale\adc.asm

ADC_SX0                           ????????         no  BYTE  External   rel    162  private  text         0     0  e:\stm8s\electronic_scale\globalvar.inc
ADC_SX1                           ????????         no  BYTE  External   rel    163  private  text         0     0  e:\stm8s\electronic_scale\globalvar.inc
ADC_SX2                           ????????         no  BYTE  External   rel    164  private  text         0     0  e:\stm8s\electronic_scale\globalvar.inc
ADC_SY0                           ????????         no  BYTE  External   rel    166  private  text         0     0  e:\stm8s\electronic_scale\globalvar.inc
ADC_SY1                           ????????         no  BYTE  External   rel    167  private  text         0     0  e:\stm8s\electronic_scale\globalvar.inc
ADC_SY2                           ????????         no  BYTE  External   rel    168  private  text         0     0  e:\stm8s\electronic_scale\globalvar.inc
ADC_THRESHOLD_QUOTIENT            ????????         no  BYTE  External   rel    170  private  text         0     0  e:\stm8s\electronic_scale\globalvar.inc
ADC_THRESHOLD_QUOTIENT1           ????????         no  BYTE  External   rel    171  private  text         0     0  e:\stm8s\electronic_scale\globalvar.inc
ADC_THRESHOLD_QUOTIENT0           ????????         no  BYTE  External   rel    172  private  text         0     0  e:\stm8s\electronic_scale\globalvar.inc
ADC_MAX_QUOTIENT                  ????????         no  BYTE  External   rel    174  private  text         0     0  e:\stm8s\electronic_scale\globalvar.inc
ADC_MAX_QUOTIENT_S1               ????????         no  BYTE  External   rel    175  private  text         0     0  e:\stm8s\electronic_scale\globalvar.inc
ADC_MAX_QUOTIENT_S0               ????????         no  BYTE  External   rel    176  private  text         0     0  e:\stm8s\electronic_scale\globalvar.inc
ADC_MAX_REMAINDER                 ????????         no  BYTE  External   rel    178  private  text         0     0  e:\stm8s\electronic_scale\globalvar.inc
ADC_MAX_REMAINDER_S1              ????????         no  BYTE  External   rel    179  private  text         0     0  e:\stm8s\electronic_scale\globalvar.inc
ADC_MAX_REMAINDER_S0              ????????         no  BYTE  External   rel    180  private  text         0     0  e:\stm8s\electronic_scale\globalvar.inc
ADC_NEXT_PTR                      ????????         no  BYTE  External   rel    185  private  text         0     0  e:\stm8s\electronic_scale\globalvar.inc
ADC_SLOPE                         ????????         no  BYTE  External   rel    190  private  text         0     0  e:\stm8s\electronic_scale\globalvar.inc
AWU_CSR                           ????????         no  WORD  External   rel    170  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
AWU_APR                           ????????         no  WORD  External   rel    172  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
AWU_TBR                           ????????         no  WORD  External   rel    174  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
ADC_DB0RH                         ????????         no  WORD  External   rel    427  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
ADC_DB0RL                         ????????         no  WORD  External   rel    429  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
ADC_DB1RH                         ????????         no  WORD  External   rel    431  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
ADC_DB1RL                         ????????         no  WORD  External   rel    433  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
ADC_DB2RH                         ????????         no  WORD  External   rel    435  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
ADC_DB2RL                         ????????         no  WORD  External   rel    437  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
ADC_DB3RH                         ????????         no  WORD  External   rel    439  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
ADC_DB3RL                         ????????         no  WORD  External   rel    441  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
ADC_DB4RH                         ????????         no  WORD  External   rel    443  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
ADC_DB4RL                         ????????         no  WORD  External   rel    445  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
ADC_DB5RH                         ????????         no  WORD  External   rel    447  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
ADC_DB5RL                         ????????         no  WORD  External   rel    449  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
ADC_DB6RH                         ????????         no  WORD  External   rel    451  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
ADC_DB6RL                         ????????         no  WORD  External   rel    453  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
ADC_DB7RH                         ????????         no  WORD  External   rel    455  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
ADC_DB7RL                         ????????         no  WORD  External   rel    457  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
ADC_DB8RH                         ????????         no  WORD  External   rel    459  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
ADC_DB8RL                         ????????         no  WORD  External   rel    461  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
ADC_DB9RH                         ????????         no  WORD  External   rel    463  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
ADC_DB9RL                         ????????         no  WORD  External   rel    465  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
ADC_CSR                           ????????         no  WORD  External   rel    467  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
ADC_CR1                           ????????         no  WORD  External   rel    469  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
ADC_CR2                           ????????         no  WORD  External   rel    471  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
ADC_CR3                           ????????         no  WORD  External   rel    473  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
ADC_DRH                           ????????         no  WORD  External   rel    475  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
ADC_DRL                           ????????         no  WORD  External   rel    477  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
ADC_TDRH                          ????????         no  WORD  External   rel    479  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
ADC_TDRL                          ????????         no  WORD  External   rel    481  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
ADC_HTRH                          ????????         no  WORD  External   rel    483  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
ADC_HTRL                          ????????         no  WORD  External   rel    485  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
ADC_LTRH                          ????????         no  WORD  External   rel    487  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
ADC_LTRL                          ????????         no  WORD  External   rel    489  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
ADC_AWSRH                         ????????         no  WORD  External   rel    491  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
ADC_AWSRL                         ????????         no  WORD  External   rel    493  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
ADC_AWCRH                         ????????         no  WORD  External   rel    495  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
ADC_AWCRL                         ????????         no  WORD  External   rel    497  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
ADC_Add_Sum                       ????????         no  WORD  External   rel     20  private  text         0     0  e:\stm8s\electronic_scale\adc_handler.inc
STMicroelectronics assembler v4.52   (C)1987-2018   Thu Dec 20 01:10:39 2018
Page 37  Assembler
                                               e:\stm8s\electronic_scale\adc.asm

ADC_Sub_Sum                       ????????         no  WORD  External   rel     21  private  text         0     0  e:\stm8s\electronic_scale\adc_handler.inc
ADC_Moving_Avg                    ????????         no  WORD  External   rel     25  private  text         0     0  e:\stm8s\electronic_scale\adc_handler.inc
ADC_Convert_Mass                  ????????         no  WORD  External   rel     26  private  text         0     0  e:\stm8s\electronic_scale\adc_handler.inc
ADC_Find_Max                      ????????         no  WORD  External   rel     27  private  text         0     0  e:\stm8s\electronic_scale\adc_handler.inc
ADC_Find_Min                      ????????         no  WORD  External   rel     28  private  text         0     0  e:\stm8s\electronic_scale\adc_handler.inc
ADC_Init                              0000         no  WORD  Internal   rel     20  public   text       110     0  e:\stm8s\electronic_scale\adc.inc
ADC_Recv_Sv                           022B         no  WORD  Internal   rel    364  public   text        20     0  e:\stm8s\electronic_scale\adc.inc
ADC_Cal_Handler                   000000EA  interrupt  LONG  Internal   rel    245  public   text         7     0  e:\stm8s\electronic_scale\adc.inc
ADC_SerData                       ????????         no  WORD  External   rel     26  private  text         0     0  e:\stm8s\electronic_scale\adc.inc
ADC_Config                            006E         no  WORD  Internal   rel    105  public   text        61     0  -
ADC_Reset                             00AB         no  WORD  Internal   rel    166  public   text         4     0  -
ADC_ReadData                          00C7         no  WORD  Internal   rel    202  public   text         6     0  -
ADC_WriData                           01FF         no  WORD  Internal   rel    325  public   text         5     0  -

BEEP_CSR                          ????????         no  WORD  External   rel    179  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc

CPU_Delay_1us                     ????????         no  WORD  External   rel     11  private  text         0     0  e:\stm8s\electronic_scale\common.inc
CHAR_MASS9                        ????????         no  BYTE  External   rel    253  private  text         0     0  e:\stm8s\electronic_scale\globalvar.inc
CHAR_MASS8                        ????????         no  BYTE  External   rel    254  private  text         0     0  e:\stm8s\electronic_scale\globalvar.inc
CHAR_MASS7                        ????????         no  BYTE  External   rel    255  private  text         0     0  e:\stm8s\electronic_scale\globalvar.inc
CHAR_MASS6                        ????????         no  BYTE  External   rel    256  private  text         0     0  e:\stm8s\electronic_scale\globalvar.inc
CHAR_MASS5                        ????????         no  BYTE  External   rel    257  private  text         0     0  e:\stm8s\electronic_scale\globalvar.inc
CHAR_MASS4                        ????????         no  BYTE  External   rel    258  private  text         0     0  e:\stm8s\electronic_scale\globalvar.inc
CHAR_MASS3                        ????????         no  BYTE  External   rel    259  private  text         0     0  e:\stm8s\electronic_scale\globalvar.inc
CHAR_MASS2                        ????????         no  BYTE  External   rel    260  private  text         0     0  e:\stm8s\electronic_scale\globalvar.inc
CHAR_MASS1                        ????????         no  BYTE  External   rel    261  private  text         0     0  e:\stm8s\electronic_scale\globalvar.inc
CHAR_MASS0                        ????????         no  BYTE  External   rel    262  private  text         0     0  e:\stm8s\electronic_scale\globalvar.inc
CHAR_MASS_1                       ????????         no  BYTE  External   rel    263  private  text         0     0  e:\stm8s\electronic_scale\globalvar.inc
CHAR_PRICE5                       ????????         no  BYTE  External   rel    268  private  text         0     0  e:\stm8s\electronic_scale\globalvar.inc
CHAR_PRICE4                       ????????         no  BYTE  External   rel    269  private  text         0     0  e:\stm8s\electronic_scale\globalvar.inc
CHAR_PRICE3                       ????????         no  BYTE  External   rel    270  private  text         0     0  e:\stm8s\electronic_scale\globalvar.inc
CHAR_PRICE2                       ????????         no  BYTE  External   rel    271  private  text         0     0  e:\stm8s\electronic_scale\globalvar.inc
CHAR_PRICE1                       ????????         no  BYTE  External   rel    272  private  text         0     0  e:\stm8s\electronic_scale\globalvar.inc
CHAR_PRICE0                       ????????         no  BYTE  External   rel    273  private  text         0     0  e:\stm8s\electronic_scale\globalvar.inc
CHAR_THRESHOLD7                   ????????         no  BYTE  External   rel    276  private  text         0     0  e:\stm8s\electronic_scale\globalvar.inc
CHAR_THRESHOLD6                   ????????         no  BYTE  External   rel    277  private  text         0     0  e:\stm8s\electronic_scale\globalvar.inc
CHAR_THRESHOLD5                   ????????         no  BYTE  External   rel    278  private  text         0     0  e:\stm8s\electronic_scale\globalvar.inc
CHAR_THRESHOLD4                   ????????         no  BYTE  External   rel    279  private  text         0     0  e:\stm8s\electronic_scale\globalvar.inc
CHAR_THRESHOLD3                   ????????         no  BYTE  External   rel    280  private  text         0     0  e:\stm8s\electronic_scale\globalvar.inc
CHAR_THRESHOLD2                   ????????         no  BYTE  External   rel    281  private  text         0     0  e:\stm8s\electronic_scale\globalvar.inc
CHAR_THRESHOLD1                   ????????         no  BYTE  External   rel    282  private  text         0     0  e:\stm8s\electronic_scale\globalvar.inc
CHAR_THRESHOLD0                   ????????         no  BYTE  External   rel    283  private  text         0     0  e:\stm8s\electronic_scale\globalvar.inc
CHAR_MONEY7                       ????????         no  BYTE  External   rel    288  private  text         0     0  e:\stm8s\electronic_scale\globalvar.inc
CHAR_MONEY6                       ????????         no  BYTE  External   rel    289  private  text         0     0  e:\stm8s\electronic_scale\globalvar.inc
CHAR_MONEY5                       ????????         no  BYTE  External   rel    290  private  text         0     0  e:\stm8s\electronic_scale\globalvar.inc
CHAR_MONEY4                       ????????         no  BYTE  External   rel    291  private  text         0     0  e:\stm8s\electronic_scale\globalvar.inc
CHAR_MONEY3                       ????????         no  BYTE  External   rel    292  private  text         0     0  e:\stm8s\electronic_scale\globalvar.inc
CHAR_MONEY2                       ????????         no  BYTE  External   rel    293  private  text         0     0  e:\stm8s\electronic_scale\globalvar.inc
CHAR_MONEY1                       ????????         no  BYTE  External   rel    294  private  text         0     0  e:\stm8s\electronic_scale\globalvar.inc
CHAR_MONEY0                       ????????         no  BYTE  External   rel    295  private  text         0     0  e:\stm8s\electronic_scale\globalvar.inc
CHAR_MAX_MASS9                    ????????         no  BYTE  External   rel    301  private  text         0     0  e:\stm8s\electronic_scale\globalvar.inc
CHAR_MAX_MASS8                    ????????         no  BYTE  External   rel    302  private  text         0     0  e:\stm8s\electronic_scale\globalvar.inc
CHAR_MAX_MASS7                    ????????         no  BYTE  External   rel    303  private  text         0     0  e:\stm8s\electronic_scale\globalvar.inc
CHAR_MAX_MASS6                    ????????         no  BYTE  External   rel    304  private  text         0     0  e:\stm8s\electronic_scale\globalvar.inc
CHAR_MAX_MASS5                    ????????         no  BYTE  External   rel    305  private  text         0     0  e:\stm8s\electronic_scale\globalvar.inc
CHAR_MAX_MASS4                    ????????         no  BYTE  External   rel    306  private  text         0     0  e:\stm8s\electronic_scale\globalvar.inc
CHAR_MAX_MASS3                    ????????         no  BYTE  External   rel    307  private  text         0     0  e:\stm8s\electronic_scale\globalvar.inc
STMicroelectronics assembler v4.52   (C)1987-2018   Thu Dec 20 01:10:39 2018
Page 38  Assembler
                                               e:\stm8s\electronic_scale\adc.asm

CHAR_MAX_MASS2                    ????????         no  BYTE  External   rel    308  private  text         0     0  e:\stm8s\electronic_scale\globalvar.inc
CHAR_MAX_MASS1                    ????????         no  BYTE  External   rel    309  private  text         0     0  e:\stm8s\electronic_scale\globalvar.inc
CHAR_MAX_MASS0                    ????????         no  BYTE  External   rel    310  private  text         0     0  e:\stm8s\electronic_scale\globalvar.inc
CHAR_MAX_MASS_1                   ????????         no  BYTE  External   rel    311  private  text         0     0  e:\stm8s\electronic_scale\globalvar.inc
CLK_ICKR                          ????????         no  WORD  External   rel    125  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
CLK_ECKR                          ????????         no  WORD  External   rel    127  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
CLK_CMSR                          ????????         no  WORD  External   rel    129  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
CLK_SWR                           ????????         no  WORD  External   rel    131  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
CLK_SWCR                          ????????         no  WORD  External   rel    133  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
CLK_CKDIVR                        ????????         no  WORD  External   rel    135  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
CLK_PCKENR1                       ????????         no  WORD  External   rel    137  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
CLK_CSSR                          ????????         no  WORD  External   rel    139  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
CLK_CCOR                          ????????         no  WORD  External   rel    141  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
CLK_PCKENR2                       ????????         no  WORD  External   rel    143  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
CLK_CANCCR                        ????????         no  WORD  External   rel    145  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
CLK_HSITRIMR                      ????????         no  WORD  External   rel    147  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
CLK_SWIMCCR                       ????????         no  WORD  External   rel    149  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
CFG_GCR                           ????????         no  WORD  External   rel    502  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
Cal_Money                         ????????         no  WORD  External   rel     34  private  text         0     0  e:\stm8s\electronic_scale\key.inc

DispADC                           ????????         no  WORD  External   rel      6  private  text         0     0  -
DispMass                          ????????         no  WORD  External   rel      7  private  text         0     0  -

EXTI_CR1                          ????????         no  WORD  External   rel    113  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
EXTI_CR2                          ????????         no  WORD  External   rel    115  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
EMPTY_LINE                        ????????         no  WORD  External   rel     53  private  text         0     0  e:\stm8s\electronic_scale\lcd.inc

FLASH_CR1                         ????????         no  WORD  External   rel     94  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
FLASH_CR2                         ????????         no  WORD  External   rel     96  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
FLASH_NCR2                        ????????         no  WORD  External   rel     98  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
FLASH_FPR                         ????????         no  WORD  External   rel    100  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
FLASH_NFPR                        ????????         no  WORD  External   rel    102  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
FLASH_IAPSR                       ????????         no  WORD  External   rel    104  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
FLASH_PUKR                        ????????         no  WORD  External   rel    106  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
FLASH_DUKR                        ????????         no  WORD  External   rel    108  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc

IWDG_KR                           ????????         no  WORD  External   rel    161  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
IWDG_PR                           ????????         no  WORD  External   rel    163  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
IWDG_RLR                          ????????         no  WORD  External   rel    165  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
I2C_CR1                           ????????         no  WORD  External   rel    203  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
I2C_CR2                           ????????         no  WORD  External   rel    205  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
I2C_FREQR                         ????????         no  WORD  External   rel    207  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
I2C_OARL                          ????????         no  WORD  External   rel    209  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
I2C_OARH                          ????????         no  WORD  External   rel    211  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
I2C_DR                            ????????         no  WORD  External   rel    213  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
I2C_SR1                           ????????         no  WORD  External   rel    215  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
I2C_SR2                           ????????         no  WORD  External   rel    217  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
I2C_SR3                           ????????         no  WORD  External   rel    219  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
I2C_ITR                           ????????         no  WORD  External   rel    221  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
I2C_CCRL                          ????????         no  WORD  External   rel    223  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
I2C_CCRH                          ????????         no  WORD  External   rel    225  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
I2C_TRISER                        ????????         no  WORD  External   rel    227  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
I2C_PECR                          ????????         no  WORD  External   rel    229  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
ITC_SPR1                          ????????         no  WORD  External   rel    507  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
ITC_SPR2                          ????????         no  WORD  External   rel    509  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
ITC_SPR3                          ????????         no  WORD  External   rel    511  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
ITC_SPR4                          ????????         no  WORD  External   rel    513  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
STMicroelectronics assembler v4.52   (C)1987-2018   Thu Dec 20 01:10:39 2018
Page 39  Assembler
                                               e:\stm8s\electronic_scale\adc.asm

ITC_SPR5                          ????????         no  WORD  External   rel    515  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
ITC_SPR6                          ????????         no  WORD  External   rel    517  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
ITC_SPR7                          ????????         no  WORD  External   rel    519  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc

KeyDelay                          ????????         no  WORD  External   rel     10  private  text         0     0  e:\stm8s\electronic_scale\common.inc
KEYDOWN_FLAG                      ????????         no  BYTE  External   rel    220  private  text         0     0  e:\stm8s\electronic_scale\globalvar.inc
KEYBOARD_STORE                    ????????         no  BYTE  External   rel    223  private  text         0     0  e:\stm8s\electronic_scale\globalvar.inc
KEYBOARD_S4                       ????????         no  BYTE  External   rel    225  private  text         0     0  e:\stm8s\electronic_scale\globalvar.inc
KEYBOARD_S3                       ????????         no  BYTE  External   rel    226  private  text         0     0  e:\stm8s\electronic_scale\globalvar.inc
KEYBOARD_S2                       ????????         no  BYTE  External   rel    227  private  text         0     0  e:\stm8s\electronic_scale\globalvar.inc
KEYBOARD_S1                       ????????         no  BYTE  External   rel    228  private  text         0     0  e:\stm8s\electronic_scale\globalvar.inc
KEYBOARD_S0                       ????????         no  BYTE  External   rel    229  private  text         0     0  e:\stm8s\electronic_scale\globalvar.inc
KEYBOARD_PTR                      ????????         no  BYTE  External   rel    230  private  text         0     0  e:\stm8s\electronic_scale\globalvar.inc
KEYBOARD_DOT_OK                   ????????         no  BYTE  External   rel    232  private  text         0     0  e:\stm8s\electronic_scale\globalvar.inc
KEYBOARD_PRICE_BUF_S4             ????????         no  BYTE  External   rel    234  private  text         0     0  e:\stm8s\electronic_scale\globalvar.inc
KEYBOARD_PRICE_BUF_S3             ????????         no  BYTE  External   rel    235  private  text         0     0  e:\stm8s\electronic_scale\globalvar.inc
KEYBOARD_PRICE_BUF_S2             ????????         no  BYTE  External   rel    236  private  text         0     0  e:\stm8s\electronic_scale\globalvar.inc
KEYBOARD_PRICE_BUF_S1             ????????         no  BYTE  External   rel    237  private  text         0     0  e:\stm8s\electronic_scale\globalvar.inc
KEYBOARD_PRICE_BUF_S0             ????????         no  BYTE  External   rel    238  private  text         0     0  e:\stm8s\electronic_scale\globalvar.inc
KEYBOARD_THRESHOLD_BUF_S4         ????????         no  BYTE  External   rel    241  private  text         0     0  e:\stm8s\electronic_scale\globalvar.inc
KEYBOARD_THRESHOLD_BUF_S3         ????????         no  BYTE  External   rel    242  private  text         0     0  e:\stm8s\electronic_scale\globalvar.inc
KEYBOARD_THRESHOLD_BUF_S2         ????????         no  BYTE  External   rel    243  private  text         0     0  e:\stm8s\electronic_scale\globalvar.inc
KEYBOARD_THRESHOLD_BUF_S1         ????????         no  BYTE  External   rel    244  private  text         0     0  e:\stm8s\electronic_scale\globalvar.inc
KEYBOARD_THRESHOLD_BUF_S0         ????????         no  BYTE  External   rel    245  private  text         0     0  e:\stm8s\electronic_scale\globalvar.inc
KEY_ARRAY_MENU                    ????????         no  BYTE  External   rel    248  private  text         0     0  e:\stm8s\electronic_scale\globalvar.inc
KEY_TYPING_FLAG                   ????????         no  BYTE  External   rel    249  private  text         0     0  e:\stm8s\electronic_scale\globalvar.inc
KeyZero_Init                      ????????         no  WORD  External   rel     23  private  text         0     0  e:\stm8s\electronic_scale\key.inc
KeyZero_Handler                   ????????         no  LONG  External   rel     24  private  text         0     0  e:\stm8s\electronic_scale\key.inc
KeyArray_Init                     ????????         no  WORD  External   rel     26  private  text         0     0  e:\stm8s\electronic_scale\key.inc
KeyArray_Scan                     ????????         no  WORD  External   rel     27  private  text         0     0  e:\stm8s\electronic_scale\key.inc
KeyArray_Handler                  ????????         no  LONG  External   rel     28  private  text         0     0  e:\stm8s\electronic_scale\key.inc
KeyArray_Settle                   ????????         no  WORD  External   rel     29  private  text         0     0  e:\stm8s\electronic_scale\key.inc
KeyArray_Display                  ????????         no  WORD  External   rel     30  private  text         0     0  e:\stm8s\electronic_scale\key.inc

LCD_Delay                         ????????         no  WORD  External   rel      8  private  text         0     0  e:\stm8s\electronic_scale\common.inc
LCD_VAR0                          ????????         no  BYTE  External   rel      8  private  text         0     0  e:\stm8s\electronic_scale\globalvar.inc
LCD_VAR1                          ????????         no  BYTE  External   rel      9  private  text         0     0  e:\stm8s\electronic_scale\globalvar.inc
LCD_VAR2                          ????????         no  BYTE  External   rel     10  private  text         0     0  e:\stm8s\electronic_scale\globalvar.inc
LCD_Init                          ????????         no  WORD  External   rel     43  private  text         0     0  e:\stm8s\electronic_scale\lcd.inc
LCD_WriChar                       ????????         no  WORD  External   rel     44  private  text         0     0  e:\stm8s\electronic_scale\lcd.inc
LCD_WriCMD                        ????????         no  WORD  External   rel     45  private  text         0     0  e:\stm8s\electronic_scale\lcd.inc
LCD_WriData                       ????????         no  WORD  External   rel     46  private  text         0     0  e:\stm8s\electronic_scale\lcd.inc
LCD_SerData                       ????????         no  WORD  External   rel     47  private  text         0     0  e:\stm8s\electronic_scale\lcd.inc
LCD_WriString                     ????????         no  WORD  External   rel     48  private  text         0     0  e:\stm8s\electronic_scale\lcd.inc
LCD_SetCursor                     ????????         no  WORD  External   rel     49  private  text         0     0  e:\stm8s\electronic_scale\lcd.inc
LCD_InitCustom                    ????????         no  WORD  External   rel     50  private  text         0     0  e:\stm8s\electronic_scale\lcd.inc

MassDivider                       ????????         no  WORD  External   rel     12  private  text         0     0  e:\stm8s\electronic_scale\common.inc
MoneyHandle                       ????????         no  WORD  External   rel     33  private  text         0     0  e:\stm8s\electronic_scale\key.inc
MassHex2DecChar                   ????????         no  WORD  External   rel      8  private  text         0     0  -

NET_ADC                           ????????         no  BYTE  External   rel    198  private  text         0     0  e:\stm8s\electronic_scale\globalvar.inc
NET_ADC0                          ????????         no  BYTE  External   rel    199  private  text         0     0  e:\stm8s\electronic_scale\globalvar.inc
NET_ADC1                          ????????         no  BYTE  External   rel    200  private  text         0     0  e:\stm8s\electronic_scale\globalvar.inc
NET_ADC2                          ????????         no  BYTE  External   rel    201  private  text         0     0  e:\stm8s\electronic_scale\globalvar.inc
NET_ADC3                          ????????         no  BYTE  External   rel    202  private  text         0     0  e:\stm8s\electronic_scale\globalvar.inc
NET_BUF                           ????????         no  BYTE  External   rel    204  private  text         0     0  e:\stm8s\electronic_scale\globalvar.inc
STMicroelectronics assembler v4.52   (C)1987-2018   Thu Dec 20 01:10:39 2018
Page 40  Assembler
                                               e:\stm8s\electronic_scale\adc.asm

NET_BUF3                          ????????         no  BYTE  External   rel    205  private  text         0     0  e:\stm8s\electronic_scale\globalvar.inc
NET_BUF2                          ????????         no  BYTE  External   rel    206  private  text         0     0  e:\stm8s\electronic_scale\globalvar.inc
NET_BUF1                          ????????         no  BYTE  External   rel    207  private  text         0     0  e:\stm8s\electronic_scale\globalvar.inc
NET_BUF0                          ????????         no  BYTE  External   rel    208  private  text         0     0  e:\stm8s\electronic_scale\globalvar.inc

PRICE_MUL3                        ????????         no  BYTE  External   rel    215  private  text         0     0  e:\stm8s\electronic_scale\globalvar.inc
PRICE_MUL2                        ????????         no  BYTE  External   rel    216  private  text         0     0  e:\stm8s\electronic_scale\globalvar.inc
PRICE_MUL1                        ????????         no  BYTE  External   rel    217  private  text         0     0  e:\stm8s\electronic_scale\globalvar.inc
PRICE_MUL0                        ????????         no  BYTE  External   rel    218  private  text         0     0  e:\stm8s\electronic_scale\globalvar.inc
PA_ODR                            ????????         no  WORD  External   rel     16  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
PA_IDR                            ????????         no  WORD  External   rel     18  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
PA_DDR                            ????????         no  WORD  External   rel     20  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
PA_CR1                            ????????         no  WORD  External   rel     22  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
PA_CR2                            ????????         no  WORD  External   rel     24  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
PB_ODR                            ????????         no  WORD  External   rel     29  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
PB_IDR                            ????????         no  WORD  External   rel     31  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
PB_DDR                            ????????         no  WORD  External   rel     33  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
PB_CR1                            ????????         no  WORD  External   rel     35  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
PB_CR2                            ????????         no  WORD  External   rel     37  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
PC_ODR                            ????????         no  WORD  External   rel     42  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
PC_IDR                            ????????         no  WORD  External   rel     44  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
PC_DDR                            ????????         no  WORD  External   rel     46  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
PC_CR1                            ????????         no  WORD  External   rel     48  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
PC_CR2                            ????????         no  WORD  External   rel     50  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
PD_ODR                            ????????         no  WORD  External   rel     55  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
PD_IDR                            ????????         no  WORD  External   rel     57  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
PD_DDR                            ????????         no  WORD  External   rel     59  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
PD_CR1                            ????????         no  WORD  External   rel     61  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
PD_CR2                            ????????         no  WORD  External   rel     63  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
PE_ODR                            ????????         no  WORD  External   rel     68  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
PE_IDR                            ????????         no  WORD  External   rel     70  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
PE_DDR                            ????????         no  WORD  External   rel     72  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
PE_CR1                            ????????         no  WORD  External   rel     74  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
PE_CR2                            ????????         no  WORD  External   rel     76  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
PF_ODR                            ????????         no  WORD  External   rel     81  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
PF_IDR                            ????????         no  WORD  External   rel     83  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
PF_DDR                            ????????         no  WORD  External   rel     85  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
PF_CR1                            ????????         no  WORD  External   rel     87  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
PF_CR2                            ????????         no  WORD  External   rel     89  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
PriceAlign                        ????????         no  WORD  External   rel     32  private  text         0     0  e:\stm8s\electronic_scale\key.inc

QuadMul                           ????????         no  WORD  External   rel     16  private  text         0     0  e:\stm8s\electronic_scale\common.inc

RST_SR                            ????????         no  WORD  External   rel    120  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc

STR_MASS                          ????????         no  BYTE  External   rel    252  private  text         0     0  e:\stm8s\electronic_scale\globalvar.inc
STR_PRICE                         ????????         no  BYTE  External   rel    267  private  text         0     0  e:\stm8s\electronic_scale\globalvar.inc
STR_THRESHOLD                     ????????         no  BYTE  External   rel    275  private  text         0     0  e:\stm8s\electronic_scale\globalvar.inc
STR_MONEY                         ????????         no  BYTE  External   rel    287  private  text         0     0  e:\stm8s\electronic_scale\globalvar.inc
STR_MAX_MASS                      ????????         no  BYTE  External   rel    298  private  text         0     0  e:\stm8s\electronic_scale\globalvar.inc
SPI_CR1                           ????????         no  WORD  External   rel    184  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
SPI_CR2                           ????????         no  WORD  External   rel    186  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
SPI_ICR                           ????????         no  WORD  External   rel    188  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
SPI_SR                            ????????         no  WORD  External   rel    190  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
SPI_DR                            ????????         no  WORD  External   rel    192  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
SPI_CRCPR                         ????????         no  WORD  External   rel    194  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
SPI_RXCRCR                        ????????         no  WORD  External   rel    196  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
STMicroelectronics assembler v4.52   (C)1987-2018   Thu Dec 20 01:10:39 2018
Page 41  Assembler
                                               e:\stm8s\electronic_scale\adc.asm

SPI_TXCRCR                        ????????         no  WORD  External   rel    198  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc

TriMul                            ????????         no  WORD  External   rel     15  private  text         0     0  e:\stm8s\electronic_scale\common.inc
TriDiv                            ????????         no  WORD  External   rel     17  private  text         0     0  e:\stm8s\electronic_scale\common.inc
TIM1_CR1                          ????????         no  WORD  External   rel    261  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
TIM1_CR2                          ????????         no  WORD  External   rel    263  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
TIM1_SMCR                         ????????         no  WORD  External   rel    265  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
TIM1_ETR                          ????????         no  WORD  External   rel    267  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
TIM1_IER                          ????????         no  WORD  External   rel    269  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
TIM1_SR1                          ????????         no  WORD  External   rel    271  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
TIM1_SR2                          ????????         no  WORD  External   rel    273  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
TIM1_EGR                          ????????         no  WORD  External   rel    275  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
TIM1_CCMR1                        ????????         no  WORD  External   rel    277  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
TIM1_CCMR2                        ????????         no  WORD  External   rel    279  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
TIM1_CCMR3                        ????????         no  WORD  External   rel    281  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
TIM1_CCMR4                        ????????         no  WORD  External   rel    283  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
TIM1_CCER1                        ????????         no  WORD  External   rel    285  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
TIM1_CCER2                        ????????         no  WORD  External   rel    287  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
TIM1_CNTRH                        ????????         no  WORD  External   rel    289  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
TIM1_CNTRL                        ????????         no  WORD  External   rel    291  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
TIM1_PSCRH                        ????????         no  WORD  External   rel    293  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
TIM1_PSCRL                        ????????         no  WORD  External   rel    295  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
TIM1_ARRH                         ????????         no  WORD  External   rel    297  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
TIM1_ARRL                         ????????         no  WORD  External   rel    299  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
TIM1_RCR                          ????????         no  WORD  External   rel    301  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
TIM1_CCR1H                        ????????         no  WORD  External   rel    303  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
TIM1_CCR1L                        ????????         no  WORD  External   rel    305  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
TIM1_CCR2H                        ????????         no  WORD  External   rel    307  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
TIM1_CCR2L                        ????????         no  WORD  External   rel    309  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
TIM1_CCR3H                        ????????         no  WORD  External   rel    311  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
TIM1_CCR3L                        ????????         no  WORD  External   rel    313  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
TIM1_CCR4H                        ????????         no  WORD  External   rel    315  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
TIM1_CCR4L                        ????????         no  WORD  External   rel    317  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
TIM1_BKR                          ????????         no  WORD  External   rel    319  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
TIM1_DTR                          ????????         no  WORD  External   rel    321  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
TIM1_OISR                         ????????         no  WORD  External   rel    323  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
TIM2_CR1                          ????????         no  WORD  External   rel    328  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
TIM2_IER                          ????????         no  WORD  External   rel    330  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
TIM2_SR1                          ????????         no  WORD  External   rel    332  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
TIM2_SR2                          ????????         no  WORD  External   rel    334  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
TIM2_EGR                          ????????         no  WORD  External   rel    336  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
TIM2_CCMR1                        ????????         no  WORD  External   rel    338  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
TIM2_CCMR2                        ????????         no  WORD  External   rel    340  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
TIM2_CCMR3                        ????????         no  WORD  External   rel    342  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
TIM2_CCER1                        ????????         no  WORD  External   rel    344  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
TIM2_CCER2                        ????????         no  WORD  External   rel    346  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
TIM2_CNTRH                        ????????         no  WORD  External   rel    348  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
TIM2_CNTRL                        ????????         no  WORD  External   rel    350  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
TIM2_PSCR                         ????????         no  WORD  External   rel    352  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
TIM2_ARRH                         ????????         no  WORD  External   rel    354  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
TIM2_ARRL                         ????????         no  WORD  External   rel    356  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
TIM2_CCR1H                        ????????         no  WORD  External   rel    358  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
TIM2_CCR1L                        ????????         no  WORD  External   rel    360  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
TIM2_CCR2H                        ????????         no  WORD  External   rel    362  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
TIM2_CCR2L                        ????????         no  WORD  External   rel    364  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
TIM2_CCR3H                        ????????         no  WORD  External   rel    366  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
TIM2_CCR3L                        ????????         no  WORD  External   rel    368  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
STMicroelectronics assembler v4.52   (C)1987-2018   Thu Dec 20 01:10:39 2018
Page 42  Assembler
                                               e:\stm8s\electronic_scale\adc.asm

TIM3_CR1                          ????????         no  WORD  External   rel    373  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
TIM3_IER                          ????????         no  WORD  External   rel    375  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
TIM3_SR1                          ????????         no  WORD  External   rel    377  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
TIM3_SR2                          ????????         no  WORD  External   rel    379  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
TIM3_EGR                          ????????         no  WORD  External   rel    381  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
TIM3_CCMR1                        ????????         no  WORD  External   rel    383  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
TIM3_CCMR2                        ????????         no  WORD  External   rel    385  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
TIM3_CCER1                        ????????         no  WORD  External   rel    387  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
TIM3_CNTRH                        ????????         no  WORD  External   rel    389  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
TIM3_CNTRL                        ????????         no  WORD  External   rel    391  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
TIM3_PSCR                         ????????         no  WORD  External   rel    393  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
TIM3_ARRH                         ????????         no  WORD  External   rel    395  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
TIM3_ARRL                         ????????         no  WORD  External   rel    397  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
TIM3_CCR1H                        ????????         no  WORD  External   rel    399  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
TIM3_CCR1L                        ????????         no  WORD  External   rel    401  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
TIM3_CCR2H                        ????????         no  WORD  External   rel    403  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
TIM3_CCR2L                        ????????         no  WORD  External   rel    405  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
TIM4_CR1                          ????????         no  WORD  External   rel    410  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
TIM4_IER                          ????????         no  WORD  External   rel    412  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
TIM4_SR                           ????????         no  WORD  External   rel    414  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
TIM4_EGR                          ????????         no  WORD  External   rel    416  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
TIM4_CNTR                         ????????         no  WORD  External   rel    418  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
TIM4_PSCR                         ????????         no  WORD  External   rel    420  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
TIM4_ARR                          ????????         no  WORD  External   rel    422  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
TypingCursorFlash                 ????????         no  WORD  External   rel     31  private  text         0     0  e:\stm8s\electronic_scale\key.inc
ThresholdCheck                    ????????         no  WORD  External   rel     10  private  text         0     0  e:\stm8s\electronic_scale\beeper.inc

UART2_SR                          ????????         no  WORD  External   rel    234  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
UART2_DR                          ????????         no  WORD  External   rel    236  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
UART2_BRR1                        ????????         no  WORD  External   rel    238  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
UART2_BRR2                        ????????         no  WORD  External   rel    240  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
UART2_CR1                         ????????         no  WORD  External   rel    242  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
UART2_CR2                         ????????         no  WORD  External   rel    244  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
UART2_CR3                         ????????         no  WORD  External   rel    246  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
UART2_CR4                         ????????         no  WORD  External   rel    248  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
UART2_CR5                         ????????         no  WORD  External   rel    250  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
UART2_CR6                         ????????         no  WORD  External   rel    252  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
UART2_GTR                         ????????         no  WORD  External   rel    254  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
UART2_PSCR                        ????????         no  WORD  External   rel    256  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc

WEIGHT_QUOTIENT                   ????????         no  BYTE  External   rel    211  private  text         0     0  e:\stm8s\electronic_scale\globalvar.inc
WEIGHT_REMAINDER                  ????????         no  BYTE  External   rel    212  private  text         0     0  e:\stm8s\electronic_scale\globalvar.inc
WWDG_CR                           ????????         no  WORD  External   rel    154  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
WWDG_WR                           ????????         no  WORD  External   rel    156  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc

ZERO_ADC                          ????????         no  BYTE  External   rel    192  private  text         0     0  e:\stm8s\electronic_scale\globalvar.inc
ZERO_ADC0                         ????????         no  BYTE  External   rel    193  private  text         0     0  e:\stm8s\electronic_scale\globalvar.inc
ZERO_ADC1                         ????????         no  BYTE  External   rel    194  private  text         0     0  e:\stm8s\electronic_scale\globalvar.inc
ZERO_ADC2                         ????????         no  BYTE  External   rel    195  private  text         0     0  e:\stm8s\electronic_scale\globalvar.inc
ZERO_ADC3                         ????????         no  BYTE  External   rel    196  private  text         0     0  e:\stm8s\electronic_scale\globalvar.inc

adc_reset_loop                        00AF         no  WORD  Internal   rel    171  private  text        24     0  -
adc_serial_bit_loop                   0204         no  WORD  Internal   rel    332  private  text        22     0  -
adc_serial_one                        021A         no  WORD  Internal   rel    341  private  text         4     0  -
adc_serial_lock                       021E         no  WORD  Internal   rel    344  private  text        13     0  -

cal_end_jp                            00F1         no  WORD  Internal   rel    252  private  text         3     0  -
STMicroelectronics assembler v4.52   (C)1987-2018   Thu Dec 20 01:10:39 2018
Page 43  Assembler
                                               e:\stm8s\electronic_scale\adc.asm

cal_start                             00F4         no  WORD  Internal   rel    255  private  text        23     0  -
cal_end                               01FE         no  WORD  Internal   rel    313  private  text         1     0  -

go_get_carry                          0260         no  WORD  Internal   rel    406  private  text        32     0  -

read_data_start                       00CD         no  WORD  Internal   rel    212  private  text        22     0  -
read_data_get_carry                   00E3         no  WORD  Internal   rel    222  private  text         7     0  -
recv_start                            023F         no  WORD  Internal   rel    389  private  text         4     0  -
recv_new_byte                         0243         no  WORD  Internal   rel    392  private  text         4     0  -
recv_bit_start                        0247         no  WORD  Internal   rel    395  private  text        25     0  -
recv_end                              0280         no  WORD  Internal   rel    441  private  text         7     0  -

show_menu_2                           012F         no  WORD  Internal   rel    283  private  text        64     0  -
show_menu_1                           016F         no  WORD  Internal   rel    290  private  text        79     0  -
show_menu_3                           01BE         no  WORD  Internal   rel    297  private  text        61     0  -
show_menu_end                         01FB         no  WORD  Internal   rel    304  private  text         3     0  -

upgrate_data                          010B         no  WORD  Internal   rel    270  private  text        36     0  -


505 labels
No errors on assembly of 'e:\stm8s\electronic_scale\adc.asm'